
<!DOCTYPE html>
<html lang="en">
<head>
<script>
if ( window.history.replaceState ) {
  window.history.replaceState( null, null, window.location.href );
}  
</script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8" />
<link rel="stylesheet" href="assets/DarkTheme.css?version=2">
<link href="sm-core-css.css" rel="stylesheet" type="text/css" />
<link href="blue.css?version=6" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="/opt/css/Material_icon.css?4">
<link rel="stylesheet" href="assets/mdl/material.indigo-pink.min.css?4">
<script src="assets/mdl/material.min.js?4"></script>

<script type="text/javascript" src="jquery2.js"></script>
<script src="/opt/js/DarkTheme.js?8"></script>
<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>		
.main-menu-btn {
  position: relative;
  display: inline-block;
  width: 28px;
  height: 28px;
  text-indent: 28px;
  white-space: nowrap;
  overflow: hidden;
  cursor: pointer;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}
/* hamburger icon */
.main-menu-btn-icon, .main-menu-btn-icon:before, .main-menu-btn-icon:after {
  position: absolute;
  top: 50%;
  left: 2px;
  height: 2px;
  width: 24px;
  background: #bbb;
  -webkit-transition: all 0.25s;
  transition: all 0.25s;
}
.main-menu-btn-icon:before {
  content: '';
  top: -7px;
  left: 0;
}
.main-menu-btn-icon:after {
  content: '';
  top: 7px;
  left: 0;
}
/* x icon */
#main-menu-state:checked ~ .main-menu-btn .main-menu-btn-icon {
  height: 0;
  background: transparent;
}
#main-menu-state:checked ~ .main-menu-btn .main-menu-btn-icon:before {
  top: 0;
  -webkit-transform: rotate(-45deg);
  transform: rotate(-45deg);
}
#main-menu-state:checked ~ .main-menu-btn .main-menu-btn-icon:after {
  top: 0;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}
/* hide menu state checkbox (keep it visible to screen readers) */
#main-menu-state {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  border: 0;
  padding: 0;
  overflow: hidden;
  clip: rect(1px,1px,1px,1px);
}
/* hide the menu in mobile view */
#main-menu-state:not(:checked) ~ #main-menu {
  display: none;
}
#main-menu-state:checked ~ #main-menu {
  display: block;
}
@media (min-width: 1200px) {
  /* hide the button in desktop view */
  .main-menu-btn {
    position: absolute;
    top: -99999px;
  }
  /* always show the menu in desktop view */
  #main-menu-state:not(:checked) ~ #main-menu {
    display: block;
  }
  .telegramclass
  {
	float:right!important;  
  }
}

.logoClass{
    position: absolute;
    top: 10px;
    left: 140px;
    /* height: 2px; background: #BBB1A3;*/
    width: 100px;
    color: #1890CC;
	font-weight: bold;
    -webkit-transition: all 0.25s;
    transition: all 0.25s;
	font-family:'Roboto Condensed';
}

.responsive {text-align: center;}
.responsive img { max-width: 100%;}

.notification .bellnote {
  position: absolute;
  top: 5px;
  right: 16px;
  padding: 2px 5px;
  border-radius: 50%;
  background-color: red;
  color: white;
  font-size:12px;
}

.bellnote {
    display: inline-block;
    min-width: 10px;
    font-size: 12px;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
}
</style>
</head>
<body>
<nav id="main-nav">

<input id="main-menu-state" type="checkbox" />
<label class="main-menu-btn" for="main-menu-state">
<span class="main-menu-btn-icon"></span> Toggle main menu visibility
</label>


<ul id="main-menu" class="sm sm-blue">
<li><a href="/opt/index.php">Home</a></li>
<li><a href="#">Futures</a>
<ul>
<li><a href="/opt/FuturesChart.php">Futures Chart</a></li>
<li><a href="/opt/FuturesOIBuildup.php">OI Buildup</a></li>
<li><a href="/opt/FuturesOIScan.php">OI Scan</a></li>
<li><a href="/opt/FuturesOIBreakup.php">OI Breakup</a></li>
<li><a href="/opt/OpenHighLowScan.php">Open-High / Open-Low</a></li>

<li><a href="/opt/DaywiseSummary.php">Daywise Price & OI Summary </a></li>
<li><a href="/opt/DaywiseDetails.php">Daywise Price & OI Details </a></li>
<li><a href="/opt/VolumeAndOISpikesScan.php">Volume / OI / OI Chg Spikes</a></li>
<li><a href="/opt/Heatmap.php">Heatmap</a></li>
<li><a href="/opt/FuturesRollover.php">Futures Rollover</a></li>
</ul>
</li>
<li><a href="#">Options</a>
<ul>
<li><a href="/opt/OptionsChart.php">Options Chart</a></li>
<li><a href="/opt/OptionChain.php">Options Chain</a></li>
<li><a href="/opt/OpenHighLowScanOptions.php">Open-High / Open-Low</a></li>
<li><a href="/opt/OptionOIStats.php">OI Stats</a></li>
<li><a href="/opt/OptionSnapshot.php">Option Snapshot</a></li>
<li><a href="/opt/OptionsOIBreakup.php">Options OI Breakup</a></li>
<li><a href="/opt/PriceVsOI.php">Price vs OI</a></li>
<li><a href="/opt/MultiStrikeOI.php">Multi Strike OI</a></li>
<li><a href="/opt/CumulativeOIChange.php">Cumulative OI Change</a></li>
<li><a href="/opt/TotalPECEOIDiff.php">Total PE-CE OI Diff</a></li>
<li><a href="/opt/MaxPain.php">Max Pain</a></li>
<li><a href="/opt/VolatilitySkew.php">Volatility Skew</a></li>
<li><a href="/opt/iv.php">IV Chart</a></li>
<li><a href="/opt/iv_hv.php">IV-HV Chart</a></li>
<li><a href="/opt/ivr.php">IVR-IVP Chart</a></li>
<li><a href="/opt/IVR-IVP-Scan.php">IVR-IVP Scan</a></li>
</ul>
</li>
<li><a href="#">Charts</a>
<ul>
<li><a href="/opt/FnOCharts.php">FnO Charts (TradingView)</a></li>
</ul>
</li>
<li><a href="#">Strategies</a>
<ul>
<li><a href="#">Straddle / Strangle</a>
<ul>
<li><a href="/opt/StraddleSnapshot.php">Straddle Snapshot</a></li>
<li><a href="/opt/StraddleCharts.php">Straddle Charts</a></li>
<li><a href="/opt/StraddleWatch.php">Straddle Watch</a></li>
<li><a href="/opt/StraddleChartsPlus.php">Straddle Charts Plus</a></li>
<li><a href="/opt/StraddleComboCharts.php">Straddle Combo Charts</a></li>
</ul>
</li>
<li><a class="sub-menu" href="#">Spreads</a>
<ul>
<li><a href="/opt/SpreadChart.php">Spread Chart</a></li>
</ul>
</li>
<li><a href="/opt/Butterfly.php">Butterfly</a></li>
<li><a href="/opt/IronButterfly.php">Iron Condor / Iron Fly</a></li>
<li><a href="/opt/DoubleCalendar.php">Double Calendar / Diagonal</a></li>
</ul>
</li>
<li><a href="#">Tools</a>
<ul>
<li><a href="/opt/PortfolioTracker.php" target='blank'>Portfolio Tracker</a></li>
</ul>
</li>
<li><a href="#">Beta</a>
<ul>
<li><a href="#">Old Versions</a>
<ul>
<li><a href="/opt/OIMonitor_prev_version.php">Multi Strike OI (Prev)</a></li>
<li><a href="/opt/TotalPECEOIDiff_prev_version.php">Total PE-CE OI Diff (Prev)</a></li>
<li><a href="/opt/OptionsOIBreakup_prev_version.php">Options OI Breakup (Prev)</a></li>
<li><a href="/opt/PriceVsOI_Old.php">Price vs OI (Prev)</a></li>
<li><a href="/opt/CumulativeOIChange_Old.php">Cumulative OI Change (Prev)</a></li>
</ul>
</li>
<li><a href="/opt/SupportResistanceScan.php">Support/Resistance Scan</a></li>
<li><a href="/opt/MultiStrikeOIBeta.php">Multi Strike OI (Beta)</a></li>
<li><a href="/opt/MultiStraddleCharts.php">Multi Straddles (Beta)</a></li>


<li><a href="/opt/MultiStrikePCR.php">Multi Strike PCR (Beta)</a></li>

<li><a href="/opt/iv_Beta.php">IV Chart (Beta)</a></li>
<li><a href="/opt/StraddleChartsATM_Beta.php">ATM Straddle Chart (Beta)</a></li>
<li><a href="/opt/ParticipantWiseOITrends.php">Participant Wise OI Trends (Beta)</a></li>
<li><a href="/opt/OptionOIStatsBeta.php">Option OI Stats (Beta)</a></li>
<li><a href="/opt/OptionChain_Beta.php">Option Chain (Beta)</a></li>
<li><a href="/opt/FuturesOIBreakupBeta.php">Future OI Breakup (Beta)</a></li>
</ul>
</li>
<li><a href="#">Help</a>
<ul>
<li><a href="/opt/FAQ.php" target='blank'>FAQ</a></li>
<li><a href="https://www.youtube.com/user/IndiaiCharts/videos" target='blank'>Videos</a></li>
<li><a href="/opt/Documentation.php">Documentation</a></li>
<li><a href="/opt/WebsiteUpdates.php">Website Updates</a></li>
<li><a href="/opt/Disclaimer.php">Disclaimer</a></li>
</ul>
</li>
<li><a href="#">Profile</a>
<ul>
<li><a href="/opt/ChangePassword.php">Change Password</a></li>
<li><a href="/opt/MyAccount.php">My Account</a></li>
</ul>
</li>
<li><a href="/opt/SubscriptionDetails.php">Subscription Details</a></li>
<li><a href="/opt/logout.php">Logout</a></li>
<li class='telegramclass'><a href="https://t.me/+Rj-i-hHeuLvY_U65">Telegram (Help/Support) &nbsp;<i class="fa" style='font-size:23px;'>&#xf2c6;</i></a></li>
</ul>
</nav>

<script type="text/javascript" src="jquery.smartmenus.js"></script>

<script type="text/javascript">
		
		$(function() {
		  var $mainMenuState = $('#main-menu-state');
		  if ($mainMenuState.length) {
			// animate mobile menu
			$mainMenuState.change(function(e) {
			  var $menu = $('#main-menu');
			  if (this.checked) {
				$menu.hide().slideDown(250, function() { $menu.css('display', ''); });
			  } else {
				$menu.show().slideUp(250, function() { $menu.css('display', ''); });
			  }
			});
			// hide mobile menu beforeunload
			$(window).on('beforeunload unload', function() {
			  if ($mainMenuState[0].checked) {
				$mainMenuState[0].click();
			  }
			});
		  }
		});
    </script>
<br>
</body>
</html>
<html lang="en">
<head lang="en">
<title>Options Chain</title>
<meta charset="utf-8" />
<meta content="iCharts" name="author" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">

<link rel="stylesheet" type="text/css" href="assets/oc_datatable/css/jquery.dataTables.css" />
<link rel="stylesheet" href="assets/CustomStyle.css?8">
<link href="/opt/js/fSelectCustom.css" rel="stylesheet" />
<script src="/opt/js/fSelect.js"></script>

<link rel="stylesheet" type="text/css" href="assets/oc_datatable/css/datatables.min.css" />
<script type="text/javascript" src="assets/oc_datatable/js/datatables.min.js"></script>
<script type="text/javascript" src="assets/oc_datatable/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="assets/oc_datatable/js/jszip.min.js"></script>
<script type="text/javascript" src="assets/oc_datatable/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="assets/oc_datatable/js/absolute.js"></script>
<script src="js/dialog-polyfill.js"></script>
<link rel="stylesheet" type="text/css" href="js/dialog-polyfill.css" />
<style type="text/css">
	
@media(max-width : 768px) {
.desktop
{
display:none;	
}
<!--.modal {
 position: absolute;
 background:none!important;
}

.modal-content {
  width: 80%!important;
}-->
}
.mdl-textfield__input {
     display: moz-inline-stack !important;
}
 .mdl-button--primary.mdl-button--primary {
     border-radius: 20px;
     background: white !important;
     color: rgb(63,81,181)!important;
  
}
 .hidebutton {
     display:none;
}



 table.optionchain tbody th, table.optionchain tbody td {
 
   /*  border-top: 1px solid #f9f9f9;
     border-right: 1px solid #f9f9f9;*/
	 
	 border-top: 1px solid #f1f1f1;
	 border-right: 1px solid #f1f1f1;
}

 button.dt-button.active {
     background: #008ed4!important;
     color: rgb(255,255,255)!important;
}
 .fs-wrap {
     display: inline-block;
     cursor: pointer;
     line-height: 1;
     width: 90px;
     font-size: 12px;
     outline-color:#3f51b5!important;

}
 .fs-dropdown {
     position: absolute;
     background-color: #fff;
     border: 1px solid #ddd;
     width: 90px;
     margin-top: 5px;
     z-index: 300px;
}
 @-moz-document url-prefix() {
     .mdl-textfield__input {
         /*display: inline!important;*/
		 display: inline-block;
    }
}
 .right_side {
     float: right !important;
}
 @media (max-width: 992px) {
     .right_side {
         float: none !important;
    }
}
 body {
     line-height: 10px!important;
	  background:rgb(255,255,255) ;
}
 .mdl-textfield__label:after {
     transition-duration: 0s!important;
}
 .mdl-textfield.is-focused .mdl-textfield__label:after {
     bottom: 5px!important;
     visibility: visible;
     width: 100%;
}
 .mdl-textfield {
     padding-top: 15px!important;
     padding-bottom:5px!important;
}
 #frmOptChain {
     padding-right: 15px;
     padding-left: 15px;
}


/*
 @-moz-document url-prefix() {
     table.cell-border thead th {
         border: 0 none;
    }
}
*/
 table.optionchain tbody th, table.optionchain tbody td {
     padding: 3px 3px;
}
 table.optionchain thead th, table.optionchain thead td {
     padding: 3px 3px;
}

 table.optionchain {
    /* table-layout:fixed;
    */
    /*this is added latestly*/
     table-layout: auto !important;
     font-family: 'Roboto', sans-serif;
     font-size: 11.5px;
     color: #333333;
     border-collapse: collapse;
     background-color: #FFFFFF;
     line-height: 20px!important;
}

 table.optionchain tbody tr:hover td{
     background-color: #BFCFFF!important ;
}


 .khaki {
     background-color: #e2d87f !important;
}
 // body{
     // background:rgb(255,255,255) 
// }
 .strikecolumnhighlight {
  
     background-color: #e2d87f;
   
}

/*.celltest {
     background: linear-gradient(to right, green, white) 17%;
}
*/

 .itmhighlight {
  
     background-color: #e8e8e8;
   
}
 .bordercss {
    /*border-top: 1px solid #f1f1f1!important;*/
     
     border-right: 1px solid #f1f1f1!important;
}

// div.scroll {
    // overflow:auto;
// }



table.optionchain tfoot th, table.optionchain tfoot td {
     padding: 3px 3px;
	 font-weight:bold;
	  border-right: 1px solid #f1f1f1!important;
	   border-bottom: 1px solid black!important;
}

.dt_toggle_buttons {

 padding: 0 8px;
 /*text-transform:none;*/

}

/* on OverFlow Next Line*/
/*.optionchain_autotoggle
{
	white-space:initial;
}*/
/***this is used to make download buttons small***/
.dt_download_buttons{
    min-width: 8px;
    vertical-align: baseline;
}


.infoclass {
  border:2px solid #ccc;
}
.mdl_info_header
{
padding: 10px;
background-color:#1890CC!important;
}
    </style>
<div>

<form method=post onsubmit="return isAllValuesSelected()" id='frmOptChain'>
<div>
<label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for='latest' style='font-weight:normal;'>Latest<input id='latest' class="mdl-radio__button" type='radio' name='rdDataType' value="latest" checked> </label>
<label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for='hist' style='font-weight:normal;'>Historical<input id='hist' class="mdl-radio__button" type='radio' name='rdDataType' value="hist"> </label>
<label></label>
<input type="hidden" id="latestDate" name="latestDate" placeholder="" value="2023-06-15" />
<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select" style='width:100px'>
<label for="optSymbol" class="mdl-textfield__label">Select Symbol</label>
<select id='optSymbol' name='optSymbol' onChange='javascript:getExpiryDatesforDate_Currency(this.value);' class="mdl-textfield__input">
<option value='NIFTY' selected>NIFTY</option><option value='BANKNIFTY'>BANKNIFTY</option><option value='MIDCPNIFTY'>MIDCPNIFTY</option><option value='FINNIFTY'>FINNIFTY</option><option value='AARTIIND'>AARTIIND</option><option value='ABB'>ABB</option><option value='ABBOTINDIA'>ABBOTINDIA</option><option value='ABCAPITAL'>ABCAPITAL</option><option value='ABFRL'>ABFRL</option><option value='ACC'>ACC</option><option value='ADANIENT'>ADANIENT</option><option value='ADANIPORTS'>ADANIPORTS</option><option value='ALKEM'>ALKEM</option><option value='AMBUJACEM'>AMBUJACEM</option><option value='APOLLOHOSP'>APOLLOHOSP</option><option value='APOLLOTYRE'>APOLLOTYRE</option><option value='ASHOKLEY'>ASHOKLEY</option><option value='ASIANPAINT'>ASIANPAINT</option><option value='ASTRAL'>ASTRAL</option><option value='ATUL'>ATUL</option><option value='AUBANK'>AUBANK</option><option value='AUROPHARMA'>AUROPHARMA</option><option value='AXISBANK'>AXISBANK</option><option value='BAJAJ-AUTO'>BAJAJ-AUTO</option><option value='BAJAJFINSV'>BAJAJFINSV</option><option value='BAJFINANCE'>BAJFINANCE</option><option value='BALKRISIND'>BALKRISIND</option><option value='BALRAMCHIN'>BALRAMCHIN</option><option value='BANDHANBNK'>BANDHANBNK</option><option value='BANKBARODA'>BANKBARODA</option><option value='BATAINDIA'>BATAINDIA</option><option value='BEL'>BEL</option><option value='BERGEPAINT'>BERGEPAINT</option><option value='BHARATFORG'>BHARATFORG</option><option value='BHARTIARTL'>BHARTIARTL</option><option value='BHEL'>BHEL</option><option value='BIOCON'>BIOCON</option><option value='BOSCHLTD'>BOSCHLTD</option><option value='BPCL'>BPCL</option><option value='BRITANNIA'>BRITANNIA</option><option value='BSOFT'>BSOFT</option><option value='CANBK'>CANBK</option><option value='CANFINHOME'>CANFINHOME</option><option value='CHAMBLFERT'>CHAMBLFERT</option><option value='CHOLAFIN'>CHOLAFIN</option><option value='CIPLA'>CIPLA</option><option value='COALINDIA'>COALINDIA</option><option value='COFORGE'>COFORGE</option><option value='COLPAL'>COLPAL</option><option value='CONCOR'>CONCOR</option><option value='COROMANDEL'>COROMANDEL</option><option value='CROMPTON'>CROMPTON</option><option value='CUB'>CUB</option><option value='CUMMINSIND'>CUMMINSIND</option><option value='DABUR'>DABUR</option><option value='DALBHARAT'>DALBHARAT</option><option value='DEEPAKNTR'>DEEPAKNTR</option><option value='DELTACORP'>DELTACORP</option><option value='DIVISLAB'>DIVISLAB</option><option value='DIXON'>DIXON</option><option value='DLF'>DLF</option><option value='DRREDDY'>DRREDDY</option><option value='EICHERMOT'>EICHERMOT</option><option value='ESCORTS'>ESCORTS</option><option value='EXIDEIND'>EXIDEIND</option><option value='FEDERALBNK'>FEDERALBNK</option><option value='GAIL'>GAIL</option><option value='GLENMARK'>GLENMARK</option><option value='GMRINFRA'>GMRINFRA</option><option value='GNFC'>GNFC</option><option value='GODREJCP'>GODREJCP</option><option value='GODREJPROP'>GODREJPROP</option><option value='GRANULES'>GRANULES</option><option value='GRASIM'>GRASIM</option><option value='GUJGASLTD'>GUJGASLTD</option><option value='HAL'>HAL</option><option value='HAVELLS'>HAVELLS</option><option value='HCLTECH'>HCLTECH</option><option value='HDFC'>HDFC</option><option value='HDFCAMC'>HDFCAMC</option><option value='HDFCBANK'>HDFCBANK</option><option value='HDFCLIFE'>HDFCLIFE</option><option value='HEROMOTOCO'>HEROMOTOCO</option><option value='HINDALCO'>HINDALCO</option><option value='HINDCOPPER'>HINDCOPPER</option><option value='HINDPETRO'>HINDPETRO</option><option value='HINDUNILVR'>HINDUNILVR</option><option value='IBULHSGFIN'>IBULHSGFIN</option><option value='ICICIBANK'>ICICIBANK</option><option value='ICICIGI'>ICICIGI</option><option value='ICICIPRULI'>ICICIPRULI</option><option value='IDEA'>IDEA</option><option value='IDFC'>IDFC</option><option value='IDFCFIRSTB'>IDFCFIRSTB</option><option value='IEX'>IEX</option><option value='IGL'>IGL</option><option value='INDHOTEL'>INDHOTEL</option><option value='INDIACEM'>INDIACEM</option><option value='INDIAMART'>INDIAMART</option><option value='INDIGO'>INDIGO</option><option value='INDUSINDBK'>INDUSINDBK</option><option value='INDUSTOWER'>INDUSTOWER</option><option value='INFY'>INFY</option><option value='INTELLECT'>INTELLECT</option><option value='IOC'>IOC</option><option value='IPCALAB'>IPCALAB</option><option value='IRCTC'>IRCTC</option><option value='ITC'>ITC</option><option value='JINDALSTEL'>JINDALSTEL</option><option value='JKCEMENT'>JKCEMENT</option><option value='JSWSTEEL'>JSWSTEEL</option><option value='JUBLFOOD'>JUBLFOOD</option><option value='KOTAKBANK'>KOTAKBANK</option><option value='L&TFH'>L&TFH</option><option value='LALPATHLAB'>LALPATHLAB</option><option value='LAURUSLABS'>LAURUSLABS</option><option value='LICHSGFIN'>LICHSGFIN</option><option value='LT'>LT</option><option value='LTIM'>LTIM</option><option value='LTTS'>LTTS</option><option value='LUPIN'>LUPIN</option><option value='M&M'>M&M</option><option value='M&MFIN'>M&MFIN</option><option value='MANAPPURAM'>MANAPPURAM</option><option value='MARICO'>MARICO</option><option value='MARUTI'>MARUTI</option><option value='MCDOWELL-N'>MCDOWELL-N</option><option value='MCX'>MCX</option><option value='METROPOLIS'>METROPOLIS</option><option value='MFSL'>MFSL</option><option value='MGL'>MGL</option><option value='MOTHERSON'>MOTHERSON</option><option value='MPHASIS'>MPHASIS</option><option value='MRF'>MRF</option><option value='MUTHOOTFIN'>MUTHOOTFIN</option><option value='NATIONALUM'>NATIONALUM</option><option value='NAUKRI'>NAUKRI</option><option value='NAVINFLUOR'>NAVINFLUOR</option><option value='NESTLEIND'>NESTLEIND</option><option value='NMDC'>NMDC</option><option value='NTPC'>NTPC</option><option value='OBEROIRLTY'>OBEROIRLTY</option><option value='OFSS'>OFSS</option><option value='ONGC'>ONGC</option><option value='PAGEIND'>PAGEIND</option><option value='PEL'>PEL</option><option value='PERSISTENT'>PERSISTENT</option><option value='PETRONET'>PETRONET</option><option value='PFC'>PFC</option><option value='PIDILITIND'>PIDILITIND</option><option value='PIIND'>PIIND</option><option value='PNB'>PNB</option><option value='POLYCAB'>POLYCAB</option><option value='POWERGRID'>POWERGRID</option><option value='PVRINOX'>PVRINOX</option><option value='RAIN'>RAIN</option><option value='RAMCOCEM'>RAMCOCEM</option><option value='RBLBANK'>RBLBANK</option><option value='RECLTD'>RECLTD</option><option value='RELIANCE'>RELIANCE</option><option value='SAIL'>SAIL</option><option value='SBICARD'>SBICARD</option><option value='SBILIFE'>SBILIFE</option><option value='SBIN'>SBIN</option><option value='SHREECEM'>SHREECEM</option><option value='SHRIRAMFIN'>SHRIRAMFIN</option><option value='SIEMENS'>SIEMENS</option><option value='SRF'>SRF</option><option value='SUNPHARMA'>SUNPHARMA</option><option value='SUNTV'>SUNTV</option><option value='SYNGENE'>SYNGENE</option><option value='TATACHEM'>TATACHEM</option><option value='TATACOMM'>TATACOMM</option><option value='TATACONSUM'>TATACONSUM</option><option value='TATAMOTORS'>TATAMOTORS</option><option value='TATAPOWER'>TATAPOWER</option><option value='TATASTEEL'>TATASTEEL</option><option value='TCS'>TCS</option><option value='TECHM'>TECHM</option><option value='TITAN'>TITAN</option><option value='TORNTPHARM'>TORNTPHARM</option><option value='TRENT'>TRENT</option><option value='TVSMOTOR'>TVSMOTOR</option><option value='UBL'>UBL</option><option value='ULTRACEMCO'>ULTRACEMCO</option><option value='UPL'>UPL</option><option value='VEDL'>VEDL</option><option value='VOLTAS'>VOLTAS</option><option value='WIPRO'>WIPRO</option><option value='ZEEL'>ZEEL</option><option value='ZYDUSLIFE'>ZYDUSLIFE</option><option value='USDINR'>USDINR</option><option value='EURINR'>EURINR</option><option value='EURUSD'>EURUSD</option><option value='GBPINR'>GBPINR</option><option value='GBPUSD'>GBPUSD</option><option value='JPYINR'>JPYINR</option><option value='USDJPY'>USDJPY</option>
</select>
</div>
<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select" style='width:100px'>
<label for="optExpDate" class="mdl-textfield__label">Expiry Date</label>
<select id='optExpDate' name='optExpDate' class="mdl-textfield__input">
<option value='15JUN23' selected> 15JUN23</option><option value='22JUN23'> 22JUN23</option><option value='29JUN23'> 29JUN23</option><option value='06JUL23'> 06JUL23</option><option value='13JUL23'> 13JUL23</option><option value='27JUL23'> 27JUL23</option><option value='31AUG23'> 31AUG23</option><option value='28SEP23'> 28SEP23</option><option value='28DEC23'> 28DEC23</option><option value='28MAR24'> 28MAR24</option><option value='27JUN24'> 27JUN24</option><option value='26DEC24'> 26DEC24</option><option value='26JUN25'> 26JUN25</option><option value='24DEC25'> 24DEC25</option><option value='25JUN26'> 25JUN26</option><option value='31DEC26'> 31DEC26</option><option value='24JUN27'> 24JUN27</option><option value='30DEC27'> 30DEC27</option> </select>
</div>

<button name='btnSubmit' class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-button--ripple-effect mdl-js-ripple-effect" type="submit"><span class="mdl-ripple"></span>Submit</button>
<label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for='mainstrikes' style='font-weight:normal;'>Near ATM Strikes<input id='mainstrikes' class="mdl-radio__button" type='radio' name='striketype' value="mainstrikes" checked> </label>
<label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for='allstrikes' style='font-weight:normal;'>All Strikes<input id='allstrikes' class="mdl-radio__button" type='radio' name='striketype' value="allstrikes"> </label>
<span class='right_side'>
<p></p>
<div id="buttons" class="material-icons"></div>
<button style='background-color:#1890CC' id='myBtn' type='button' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored dt_download_buttons '><i class="material-icons">info_outline</i></button>

<div id="myModal" class="modal">

<div class="modal-content" style='width:50%;overflow-y:auto;border: 1px solid #ccc;'>
<span class="close"> <i class="material-icons " style='color:#1890CC;font-size:28px;'>cancel</i></span>
<p class='mdl-dialog__title' style='font-size:3px;padding:0px;'>&nbsp;</p>
<p class='mdl-dialog__title' style='font-size:3px;padding:0px;'>&nbsp;</p>
<div class="mdl-card__title mdl-color--primary mdl-color-text--white mdl_info_header">
<h3 class="mdl-card__title-text"><b style='font-size:16px;'>Option Chain</b></h3>
</div>
<div class='infoclass'>
<p>Our key tool, this is currently the most used tool on our website. We have tried our best to provide as much data as possible in the tool. By default, <b>“Latest”</b> option is selected, this ensures you are viewing latest / current data in the option chain. <b>“Historical”</b> option allows you to load past expiries, enabling you to view historical option chain. You also have the option to view only near ATM strikes (strikes that are close to current price of the selected scrip) by selecting <b>“Near ATM Strikes”</b> option or you can view all strikes by selecting <b>“All Strikes”</b> option.</p>
<p>On the right most extreme side of the page, we have provided two buttons (orange coloured) to enable you to download the currently displayed data in for of <b> CSV </b> <i class="fa fa-file-text-o"></i> or <b> XLS </b> <i class="fa fa-file-excel-o"></i> file.</p>
<p>Just above the option chain data table you will see many buttons (blue coloured) that allow you to toggle the display of various columns in the option chain. You can use this to reduce the data displayed in the table to make things more clearer. Eg. If you do not wish to view greeks, you can click the <b>“Greeks”</b> button to hide the Greek columns. The button will turn white indicating that the Greek columns have been hidden. Clicking the button again will re-display the columns.</p>
<b>About “Buildup” columns</b>
<p>The <u>buildup</u> columns displayed are <b>“Buildup”</b> and <b>“Trend” </b>. Buildup is based on open interest buildup.<b> Eg.</b> If <u>price</u> of the option is <u>up <i class="fa fa-arrow-up" style='color:green;'></i></u> and <u>OI</u> also is <u>up <i class="fa fa-arrow-up" style='color:green;'></i></u> then it is considered long buildup so <b>“LB”</b> is displayed in this column. If <u>price</u> is <u>up<i class="fa fa-arrow-up" style='color:green;'></i></u> and <u>OI</u> is <u>down<i class="fa fa-arrow-down" style='color:red;'></i></u> then <b>“SC”</b>(short covering) is displayed. If <u>price</u> is <u>down<i class="fa fa-arrow-down" style='color:red;'></i></u> and <u>OI</u> is <u>up <i class="fa fa-arrow-up" style='color:green;'></i></u> then it is <b>“SB”</b> (short buildup) and if price is <u>down <i class="fa fa-arrow-down" style='color:red;'></i></u> and OI is <u>down <i class="fa fa-arrow-down" style='color:red;'></i></u> then it is <b>“LU”</b> (long unwinding).</p>
<p>The <u>trend</u> column is interpretation of the above buildup. If on the call side buildup is <b>“LB”</b> or <b>“SC”</b> then trend is <b>“Bullish”</b> (since longs are getting added on the call side or shorts are being reduced both of which are bullish). If buildup is <b>“SB”</b> or <b>“LU”</b> then <b>“Bearish”</b> is displayed as the trend. On the put side if buildup is <b>“SB”</b> or <b>“LU”</b> then it is bullish (shorts getting added or longs being reduced which are both bullish). If buildup is <b>“LB”</b> or <b>“SC”</b> then the trend is interpreted as <b>“Bearish”</b>.</p>
<b>Usage of the <b>“Trend”</b> interpretation</b>
<p>If ATM strikes on both call and put side show <b>“Bullish”</b> as the trend then the scrip has a bullish bias and if they both show <b>“Bearish”</b> as the trend then the scrip has a bearish bias. It would help further if other near ATM strikes also show the same as this makes the bullish or bearish case stronger. But do NOTE that this just indicates trend bias. It would greatly help if you use chart technical / indicators to confirm this same trend bias on the chart and then take entries in the direction indicated by both trend bias and chart technical / indicators. DO NOT just blindly trade based on this interpretation as this is just a bias indicated by the data.</p>
<b>Color Codes / Highlights</b>
<p>We have highlighted the data by using coloring the background of few data cells. Details are given below :</p>
<li style='margin-left:15px;'>On the <b>call side,</b>&nbsp;<u>most negative value of OI change (max reduction of OI)</u> is shown highlighted by
<span style='background-color:#90EE90;'> &nbsp;green&nbsp;</span> background. <u>Lowest or most negative OI number</u> is also highlighted by <span style='background-color:#90EE90;'>&nbsp;green&nbsp;</span> background.</li>
<li style='margin-left:15px;'>Also, again on the <b>call side,</b>&nbsp;<u>max positive value of OI change (max addition of OI)</u> is shown highlighted by <span style='background-color:#FFBFC0;'>&nbsp;light red&nbsp;</span> background. <u>Max OI number </u>is also highlighted by <span style='background-color:#FFBFC0;'>&nbsp;light red&nbsp;</span> background.</li>
<li style='margin-left:15px;'>On the <b>put side,</b>&nbsp;<u> most positive value of OI change (max addition of OI)</u> is shown highlighted by
<span style='background-color:#90EE90;'>&nbsp;green&nbsp;</span>and so is <b>max OI number</b> also.</li>
<li style='margin-left:15px;'>Also, again on the <b>put side,</b>&nbsp;<u> most negative value of OI change (max reduction of OI)</u> is shown highlighted by <span style='background-color:#FFBFC0;'>&nbsp;light red&nbsp;</span> and so is <b>lowest OI number</b> or most negative is also highlighted by
<span style='background-color:#FFBFC0;'>&nbsp;light red&nbsp;</span>.</li>
<li style='margin-left:15px;'>On both call & put side,<b> max volume </b> is highlighted by <span style='background-color:#ADD8E6;'>&nbsp;light blue&nbsp; </span>&nbsp;background</li>
<p></p>
<b>Clickable Links in the option chain</b>
<p>Clicking on <u>call or put LTP</u> will take you to that particular option’s chart. Clicking on a strike price will take you to that strike’s straddle chart.</p>
<b>OI & OI change Totals</b>
<p>Below the option chain data table the <u>totals for OI and OI change</u> are displayed, separate for calls and puts. Below the strike price column net <u>put OI change minus call OI change</u> is displayed.</p>
<b>Why are our greeks values different from others?</b>
<p>There are few reasons for this. We use futures price as the underlying instead of cash price (but we use options pricing model that accepts futures price so it is not a disadvantage). We currently do not have cash data so we use futures price. Secondly, we also use different parameters like volatility, interest rate and the actual options pricing model itself. All these differences result in different Greek numbers. No two websites / tools will display identical values for greeks. The best thing is the stick to a single source for these values and it should work out fine.</p>
<p></p>
<b>Note:</b>
<p>1. The shaded times (under Time column) indicate those Call/Put values in that row belong to earlier days</p>
<p>2. Data of Option Chain gets updated in the evening according to the Bhavcopy</p>
</div>
</div>
</div>
<p></p>
</span>
<span class='right_side'>
<div class='desktop'><p></p></div>


<span style='font-size:12px;' id="FuturesData">&nbsp;</span>
<span class='futdata' id="SpotPriceData" style='font-size:12px;'>&nbsp;</span>
<span style='font-size:12px;' id="LotSize">&nbsp;</span>

<div class='desktop'><p></p></div>
</span>
</div>

<div style='margin-right:0.25em;margin-top:10px;' id="buttons2" class="material-icons optionchain_autotoggle"></div>
<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label has-placeholder" style='width:10px'>
</div>

<input name="save" id='save' type="button" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-button--ripple-effect mdl-js-ripple-effect" value="Save" style='background:#333!important;border-radius:20px;display:none;' />
<p></p>
</form>
</div>
<table cellspacing='0' cellpadding='0' class='optionchain' id='sort_table' style='width:99.6%!important'>
<thead>
<tr><th style='border:none;text-align: center;background-color:#7BC862;color:#fff' colspan=17>Calls</th> <th style='background-color:#6C7275;border:none;'>&nbsp;</th>
<th style='border:none;background-color:#dc143c;text-align: center;color:#fff' colspan=19>Puts</th> </tr>
<tr>
<th>Build Up</th>
<th>Trend</th>
<th>Time</th>
<th>Vega</th>
<th>Theta</th>
<th>Gamma</th>
<th>Delta</th>
<th>IV Chg</th>
<th>IV</th>
<th>OI Chg</th>
<th>OI</th>
<th>Volume</th>
<th>Chg (Pts)</th>
<th>LTP</th>
<th>VWAP</th>
<th>Bid</th>
<th>Ask</th>
<th class='khaki'>Strike Price</th>
<th>Bid</th>
<th>Ask</th>
<th>VWAP</th>
<th>LTP</th>
<th>Chg (Pts)</th>
<th>Volume</th>
<th>OI</th>
<th>OI Chg</th>
<th>IV</th>
<th>IV Chg</th>
<th>Delta</th>
<th>Gamma</th>
<th>Theta</th>
<th>Vega</th>
<th>PCR-OI</th>
<th>PCR-Vol</th>
<th>Time</th>
<th>Trend</th>
<th>Build Up</th>
</tr>
</thead>
<tfoot>
<tr>
<th colspan=9></th>
<th>Total CE <br> OI Chg </th>
<th>Total CE <br> OI </th>
<th>Total CE <br> Volume </th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th>PE-CE <br>OI Chg</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th>Total PE <br> Volume </th>
<th>Total PE <br> OI </th>
<th>Total PE <br> OI Chg </th>
<th colspan=11></th>
</tr>
<tr>
<th colspan=9></th>
<th id='total_call_oi_chg'></th>
<th id='total_call_oi'></th>
<th id='total_call_volume'></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th id='diffoichange'></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th id='total_put_volume'></th>
<th id='total_put_oi'></th>
<th id='total_put_oi_chg'></th>
<th colspan=11></th>
</tr>
</tfoot>
</table><p style='color:red;'>*** Data shown here is sync'd with EOD data after market hours once EOD bhavcopy becomes available via our data feed</p><input type="hidden" id="strikePriceATM" name="strikePriceATM" placeholder="" value="18750" />
<input type="hidden" id="rdDataType" name="rdDataType" placeholder="" value="latest" />
<input name="userName" id='userName' type="hidden" value="hemanshu" />
<input name="defaultDate" id='defaultDate' type="hidden" value="2023-06-15" />
<input name="expiry" id='expiry' type="hidden" value="" />
<input name="close" id='close' type="hidden" value="" />
<input name="close_chg" id='close_chg' type="hidden" value="" />
<input name="close_chg_percent" id='close_chg_percent' type="hidden" value="" />
<input name="lastupdated" id='lastupdated' type="hidden" value="" />
<input type="hidden" id="spot_price" name="spot_price" placeholder="" value="" />
<input type="hidden" id="spot_chg_percent" name="spot_chg_percent" placeholder="" value="" />
<input type="hidden" id="spot_chg" name="spot_chg" placeholder="" value="" />

<input type="hidden" id="defaultDatedMY" name="defaultDatedMY" placeholder="" value="15-Jun-2023" />

<input name="SymbType" id='SymbType' type="hidden" value="FNO" />
<input name="sessionID" id='sessionID' type="hidden" value="igqunit2kpu90osvqhe5v4ji76" />
<input name="CallPutColorsValue" id='CallPutColorsValue' type="hidden" value="0" />


<script src="/opt/js/Customjs_Curr.js?21"></script>
<script>
$.fn.dataTable.ext.errMode = 'none';

infodialogmodel();

	// function format(data)
// {
    // data = parseFloat(data);

	// return data.toLocaleString('en-IN');
// }
var montlyexpdate="";			
var userName=$('#userName').val();		
var rdDataType=$('#rdDataType').val();
var optExpDateval;
var txtDateval;
//02May***
// var defaultDatedMY;
var default_histdate;
if(rdDataType=='latest')
{
	 // optExpDateval="15JUN23";
	 // optExpDateval="15JUN23";
	 
	 optExpDateval="15JUN23";
	 txtDateval="2023-06-15";
	 // getLatestPriceInfo();
	 getLatestPriceInfo_eod();
	 getLatestSpotPrice_Spot(optExpDateval);
	
	 
	 // console.log(rdDataType,'rdDataType test')
// console.log(optExpDateval,txtDateval'optExpDateval test')
}
else
{
	optExpDateval=$('#optExpDate_hist').val();
	txtDateval=$('#txtDate').val();
	getHistoricalSpotPrice(optExpDateval)	;
	getHistPriceInfo()	
 //14may***
	default_histdate="2023-06-14";
	// console.log(default_histdate,'default_histdate')
	
}

(function($) {
    $(function() {
       // $('#optPutStrike').fSelect();
	   $('#optExpDate_hist').fSelect({
	 searchText: 'Search',
	 // placeholder: 'Select some options',
      // placeholder: 'Select Expiry Dates',
	  numDisplayed: 1,
     });
    });
})(jQuery);
// console.log(optExpDateval,'optExpDateval')
 // var strikePriceATM=$("strikePriceATM").val("");
 
   

var strikePriceATM=$('#strikePriceATM').val();
// console.log(strikePriceATM,'strikePriceATMrrrrrrrrrrr')
 // console.log(strikePriceATM,'strikePriceATM')
/*	c***	*/

var symbol=$("#optSymbol").val();
var expiry=$("#expiry").val();
var FutureSymbolExpdate=symbol+'-'+expiry;
var ClosingPrice=$("#close").val();
var close_chg=$("#close_chg").val();
var close_chg_percent=$("#close_chg_percent").val();
var lastupdated=$("#lastupdated").val();
var SymbType=$("#SymbType").val();
var sID = $("#sessionID").val();
			
// InitialPriceInfoData(symbol,expiry,FutureSymbolExpdate,ClosingPrice,close_chg,close_chg_percent,lastupdated);
// var selectedsymbol=$("#optSymbol").val();
// var spot_chg=$("#spot_chg").val();
// var SpotPrice=$("#spot_price").val();
// var spot_chg_percent=$("#spot_chg_percent").val();
// if(selectedsymbol == 'NIFTY' || selectedsymbol == 'BANKNIFTY' || selectedsymbol == 'FINNIFTY' && SymbType == 'FNO'){  
    // if (spot_chg.replace(/\,/g,'') < 0) {
                                // SpotCloseChgcaret = 'arrow_drop_down';
                                // SpotCloseChgcaretcolor = '#F44336';
                            // }   
// else if (spot_chg.replace(/\,/g,'') > 0) {
                                // SpotCloseChgcaret = 'arrow_drop_up';
                                // SpotCloseChgcaretcolor = '#4CAF50';
                            // } else {
                                // SpotCloseChgcaret = 'remove';
                                // SpotCloseChgcaretcolor = '#000000';
                            // }              
  // document.getElementById("SpotPriceData").innerHTML = "<div>" + "<span>" + "Implied Spot Price " + "</span>" +
   // "<span style='font-weight:bold'>" + SpotPrice + "</span>" 
  // +"<span   ><i class='material-icons  md-24' style='color:"+SpotCloseChgcaretcolor+"'>"+SpotCloseChgcaret+"</i></span>"+
  // "<span style='font-weight:bold'>"+spot_chg+"</span>"+
  // "<span  style='color:"+SpotCloseChgcaretcolor+"'>"+" (<b>"+ spot_chg_percent + "%</b>)"+"</span>"+ "&nbsp;&nbsp;</div>";
         // // }
      
// }

var form = document.getElementById("frmOptChain");
document.getElementById("hist").addEventListener("click", function () {

  form.submit();
});

document.getElementById("latest").addEventListener("click", function () {

  form.submit();
});

var form = document.getElementById("frmOptChain");
document.getElementById("mainstrikes").addEventListener("click", function () {
// $('#optExpDate').empty();
  form.submit();
  // getstrikeval(1);
});

document.getElementById("allstrikes").addEventListener("click", function () {
// $('#optExpDate').empty();
  form.submit();
   // getstrikeval(2);
});

var strikePriceATMvalue;
var Niftyfutureprice;
var FutureSymbol;
var ClosingPrice;
var FuturesCloseChg;
var FuturesCloseChgPercent;
var TimeStamp;


var calltrendcolor;
var callivchgcolor;
var calloichgcolor;
var callchgcolor;
var puttrendcolor;
var putivchgcolor;
var putoichgcolor;
var putchgcolor;
var StrikePriceIndex;
var run;
var gradient_percent;
var defaultstrikeprice=parseFloat(strikePriceATM);
//17May***
var defaultDatedMY=$('#defaultDatedMY').val();
// var nameType = $.fn.dataTable.absoluteOrder( {
    // value: "", position: 'bottom'
// } );
//this code used for sorting of trend
var namesType = $.fn.dataTable.absoluteOrder( [
    { value: '-', position: 'bottom' }
  ] );
 var numbersType = $.fn.dataTable.absoluteOrderNumber( [
    { value: '-', position: 'bottom' }
  ] );
  

$.fn.dataTable.ext.type.order['buildup-priority-pre'] = function ( d ) {
	// console.log('entered')
    switch ( d ) {
        case 'LB'   :   return 1;
        case 'LU'   :   return 4;
		case '-'   	:   return 5;
		case 'SC'   :   return 2;
        case 'SB'   :   return 5;	
				}
    return 0;
};

//this code used for sorting of time
/*$.fn.dataTableExt.oSort['nullable-asc'] = function(a,b) {
    if (a == '-')
        return 1;
    else if (b == '-')
        return -1;
    else
    {
        var ia = parseInt(a);
        var ib = parseInt(b);
        return (ia<ib) ? -1 : ((ia > ib) ? 1 : 0);
    }
}

$.fn.dataTableExt.oSort['nullable-desc'] = function(a,b) {
    if (a == '-')
        return 1;
    else if (b == '-')
        return -1;
    else
    {
        var ia = parseInt(a);
        var ib = parseInt(b);
        return (ia>ib) ? -1 : ((ia < ib) ? 1 : 0);
    }
}*/
var Buildup_group=[0,36];
var Trend_group=[1,35];
var Time_group=[2,34];
var PCR_group=[32,33];
var Greeks_group=[3,4,5,6,28,29,30,31];
var Iv_group=[7,8,26,27];
var Oi_group=[9,10,24,25];
var Volume_group=[11,23];
var Price_group=[12,13,21,22];
var Vwap_group=[14,20];
var Ask_group=[16,18];
var Bid_group=[15,19];


var Buildup_first_column=0;
var Trend_first_column=1;
var Time_first_column=2;
var PCR_first_column=32;
var Greeks_first_column=3;
var Iv_first_column=7;
var Oi_first_column=9;
var Volume_first_column=11;
var Price_first_column=12;
var Vwap_first_column=14;
var Ask_first_column=16;
var Bid_first_column=15;
		
			
			var Buildup_btn_idx=8;
			var Trend_btn_idx=6;
			var Time_btn_idx=7;
			var PCR_btn_idx=5;
			var Greeks_btn_idx=0;
			var Iv_btn_idx=1;
			var Oi_btn_idx=2;
			var Volume_btn_idx=4;
			var Price_btn_idx=3;
			var Vwap_btn_idx=9;
			// var Ask_btn_idx=11;
			// var Bid_btn_idx=11;
			

var beforestrikecount=0;
var afterstrikecount=0;
var strikepricecolumnindex=17;
var datatablescolumnlength=37;

//17May***
var calltimecolumnindex=2;
var puttimecolumnindex=34;

var table = $('#sort_table').DataTable({
	dom: 'Bfrtip',
    // scrollX: true,
    // fixedColumns: true,
	 fixedHeader: true,
	   // scrollY: 900,		   
    paging: false,
    bFilter: false,
	"autoWidth" : false,
	 stateSave: true,
	  stateDuration:-1,//session storage
	  stateLoadCallback: function (settings, callback) {
	
        $.ajax( {
			// getOptionChainState.php
			"type": "POST",
            url: 'hcharts/stx8req/php/getOptionChain.php',
			 // "un": "hemanshu",
			 // "data": {
                  "data":{"un":userName},

              // },
            dataType: 'json',
            success: function (json) {
				//remove sorting from saved string in db
				// console.log(json,'json br')
				 if (json.order) delete json.order;
				 // console.log(json.columns.length,'get json values')
				 // if(json.columns.length<=29)delete json.columns
				 // if(json.columns.length<=29) json.columns=[];
			
				 
				
				// stringified = stringified.replace('"order": "[7,"asc"]"', '"order": "[13,"asc"]"');
				// var jsonObject = JSON.parse(stringified);
				// console.log(jsonObject,'jsonObject')
				// currOrder = opportunityTable.order();
				if(json==1)
				{
					// on intial load disable greeks columns
					// table.columns([2,3,4,5,21,22,23,24]).visible(false);
					beforestrikecount=strikepricecolumnindex;
					afterstrikecount=strikepricecolumnindex;
					//h***
					
					// table.columns([0,1,2,3,4,5,6,24,25,26,27,31,32]).visible(false);//Disable Trend and greeks
					
					
					table.columns(Buildup_group).visible(false);
					 table.columns(Vwap_group).visible(false);
					 table.columns(Ask_group).visible(false);
					 table.columns(Bid_group).visible(false);
					table.columns(Trend_group).visible(false);
					 table.columns(Greeks_group).visible(false);
					 
					// table.columns([2,3,4,5,21,22,23,24]).visible(false);//Disable greeks
					// table.button(0).active('true')//disable greeks
					// table.button(6).active('true')//Disable Trend
					table.button(Iv_btn_idx).active('true')
					table.button(Oi_btn_idx).active('true')
					table.button(Price_btn_idx).active('true')
					table.button(Volume_btn_idx).active('true')
					table.button(PCR_btn_idx).active('true') 
					table.button(Time_btn_idx).active('true')
					callback( null );
					
				}
				else
				{
					// console.log(json.columns,'testing')
					// console.log(json,'length')
					//29-total number of columns in datatatble
					// var diff= 29-json.columns.length;
					var diff= datatablescolumnlength-json.columns.length;
					// console.log(diff,'diff')
					
					if(diff == 0)
						
					{
					for(i=0;i<json.columns.length;i++)
					{
						
							if(i<strikepricecolumnindex)
							{
					if(json.columns[i].visible===true)
					{
					beforestrikecount=beforestrikecount+1;
					// console.log(beforestrikecount ,'stateLoadCallback ')
					}
						}
						if(i>strikepricecolumnindex)
						{
							if(json.columns[i].visible===true)
					{
						afterstrikecount=afterstrikecount+1;
					// console.log(afterstrikecount,'stateLoadCallback')
					}					
						}
					}
					
						if(json.columns[Greeks_first_column].visible===true) //cheking greeks column first variable 
							{
							 table.button(Greeks_btn_idx).active('true');//making greeks column active
							}
							if(json.columns[Iv_first_column].visible===true) //cheking iv column first variable 
							{
							 table.button(Iv_btn_idx).active('true');//making iv column active
							}
							
							if(json.columns[Oi_first_column].visible===true) //cheking oi column first variable 
							{
							 table.button(Oi_btn_idx).active('true');//making oi column active
							}
							
							if(json.columns[Price_first_column].visible===true) //cheking Price column first variable 
							{
							 table.button(Price_btn_idx).active('true');//making Price column active
							}
							if(json.columns[Volume_first_column].visible===true) //cheking volume column first variable 
							{
							 table.button(Volume_btn_idx).active('true');//making volume column active
							}
							if(json.columns[PCR_first_column].visible===true) //cheking pcr column first variable 
							{
							 table.button(PCR_btn_idx).active('true');//making pcr column active
							}
							if(json.columns[Trend_first_column].visible===true) //cheking trend column first variable 
							{
							 table.button(Trend_btn_idx).active('true');//making trend column active
							}
							if(json.columns[Buildup_first_column].visible===true) //cheking buildup column first variable 
							{
							 table.button(Buildup_btn_idx).active('true');//making buildup column active
							}
						  if(json.columns[Vwap_first_column].visible===true) //cheking buildup column first variable 
							{
							 table.button(Vwap_btn_idx).active('true');//making buildup column active
							}
							 if(json.columns[Time_first_column].visible===true) //cheking Time column first variable 
							{
							 table.button(Time_btn_idx).active('true');//making Time column active
							}
							callback( json );
							
				}
				else if(diff == 8)
				{
						// if diff is equal to 8 get old visible number and update with new column index number 
		
				var prev_Trend_first_column=0;
			var prev_Time_first_column=1;
			var prev_PCR_first_column=25;
			var prev_Greeks_first_column=2;
			var prev_Iv_first_column=6;
			var prev_Oi_first_column=8;
			var prev_Volume_first_column=10;
			var prev_Price_first_column=11;
		
					 table.columns(Buildup_group).visible(false);
					 table.columns(Vwap_group).visible(false);
					 table.columns(Ask_group).visible(false);
					 table.columns(Bid_group).visible(false);
					
					
					beforestrikecount=strikepricecolumnindex;
					afterstrikecount=strikepricecolumnindex;
				//checking Trend Column
				if(json.columns[prev_Trend_first_column].visible===true) 
				{	
				table.columns(Trend_group).visible(true);
				table.button(Trend_btn_idx).active('true');//making Trend Button active
				}
				else  table.columns(Trend_group).visible(false);
				
				//checking Time Column
				if(json.columns[prev_Time_first_column].visible===true)
				{
					table.columns(Time_group).visible(true);
					table.button(Time_btn_idx).active('true');//making Time Button active
				}
				else  table.columns(Time_group).visible(false);
				
				//checking Greeks Column
				 if(json.columns[prev_Greeks_first_column].visible===true) 
				 {	 
			    
				 table.columns(Greeks_group).visible(true);
				 table.button(Greeks_btn_idx).active('true');//making Greeks Button active
				 }
				else  table.columns(Greeks_group).visible(false);
				
				//checking Iv Column
				if(json.columns[prev_Iv_first_column].visible===true) 
				{	
				table.columns(Iv_group).visible(true);
				 table.button(Iv_btn_idx).active('true');//making Iv Button active
				}
				else  table.columns(Iv_group).visible(false);
			
			//checking Oi Column
			   if(json.columns[prev_Oi_first_column].visible===true) 
			   {   
			   table.columns(Oi_group).visible(true);
			    table.button(Oi_btn_idx).active('true');//making OI Button active
			   }
				else  table.columns(Oi_group).visible(false);
				
				//checking Volume Column
			   if(json.columns[prev_Volume_first_column].visible===true) 
			   {
				   table.columns(Volume_group).visible(true);
				    table.button(Volume_btn_idx).active('true');//making Volume Button active
			   }
				else  table.columns(Volume_group).visible(false);
				
					//checking Price Column
			   if(json.columns[prev_Price_first_column].visible===true) 
			   {
				   table.columns(Price_group).visible(true);
				    table.button(Price_btn_idx).active('true');//making Price Button active
			   }
				else  table.columns(Price_group).visible(false);
					//checking Pcr Column
			   if(json.columns[prev_PCR_first_column].visible===true) 
			   {
				   table.columns(PCR_group).visible(true);
				    table.button(PCR_btn_idx).active('true');//making Pcr Button active
			   }
				else  table.columns(PCR_group).visible(false);
				//checking vwap/ask/bid Column
				// if(json.columns[14].visible===true) 
			   // {
				   // table.columns([14,15,16,18,19,20]).visible(true);
				    // table.button(9).active('true');//making Pcr Button active
			   // }
				// else  table.columns([14,15,16,18,19,20]).visible(false);
				
					// callback( json );
					callback( null );
					
					
				}
				else
				{
					// console.log('length 3')
					beforestrikecount=strikepricecolumnindex;
					afterstrikecount=strikepricecolumnindex;
					//h***
					table.columns(Buildup_group).visible(false);
					 table.columns(Vwap_group).visible(false);
					 table.columns(Ask_group).visible(false);
					 table.columns(Bid_group).visible(false);
					table.columns(Trend_group).visible(false);
					 table.columns(Greeks_group).visible(false);
					 
						table.button(Iv_btn_idx).active('true')
					table.button(Oi_btn_idx).active('true')
					table.button(Price_btn_idx).active('true')
					table.button(Volume_btn_idx).active('true')
					table.button(PCR_btn_idx).active('true') 
					table.button(Time_btn_idx).active('true')
					callback( null );
					
					
					
					
					
					
				}
				}
			
            }
        } );
    },
	"stateSaveCallback": function (settings, data) {
		   var dtstateString = JSON.stringify(data);
                        // Send an Ajax request to the server with the state object
						// console.log(JSON.parse(dtstateString),'dtstateString')
						
						var highlight=JSON.parse(dtstateString);
						// console.log(highlight.columns,'highlight')
					
					
						if (run == true) {
							
							beforestrikecount=0;	
							afterstrikecount=0;	
							for(i=0;i<highlight.columns.length;i++)
							{
						
							if(i<strikepricecolumnindex)
								{
					if(highlight.columns[i].visible===true)
					{
					beforestrikecount=beforestrikecount+1;
					// console.log(beforestrikecount,'beforestrikecount 2')
					}
						}
						if(i>strikepricecolumnindex)
						{
							if(highlight.columns[i].visible===true)
					{
						afterstrikecount=afterstrikecount+1;
					// console.log(afterstrikecount,'afterstrikecount 2')
					
					}					
						}
					}
                        $.ajax( {
                            "url": "hcharts/stx8req/php/SetOptionChain.php",
							
							  // "data": {"un":"haritha123", "state": dtstateString} ,//you can use the id of the datatable as key if it's unique
                            "data": {"un":userName, "state": dtstateString} ,//you can use the id of the datatable as key if it's unique
                            "dataType": "json",
                            "type": "POST",
                            "success": function (data) {
								// console.log(data,'data')
								
								if(data==1)
								{
									// console.log('Saved Sucessfully')
								}
								
							}
                        } );
						}
						run = false;
                    },
					
    // scrollCollapse: true,
    // responsive: true,
    // scrollResize: true,
    // bSort: false,
	// "order": [ 12, 'asc'],
	"order": [ 17, 'asc'],
    // aaSorting: [],
	// "order":[],
    // fixedColumns: {
        // leftColumns: 2,
        // rightColumns: 1
    // },
	buttons: [],
    "ajax": {
			"url": "OptionChainTable_tc.php?txtDate="+txtDateval+"&optSymbol=NIFTY&optExpDate="+optExpDateval+"&dType=latest&striketype=mainstrikes&SymbType=FNO&sessionID=igqunit2kpu90osvqhe5v4ji76&userName=hemanshu",
			
		"type": 'POST',

        cache: false,
    },
 "infoCallback": function( settings, start, end, max, total, pre ) {
    // return "Showing" +start +" to "+ end + "  Option Strikes";
    return "";

  },
 "language": {
   
                emptyTable: "No Data Available",
               
    },
	
    'drawCallback': function(settings) {
        if (typeof settings.json != "undefined") {
			

            strikePriceATMvalue = settings.json.strikePriceATM;
            Niftyfuturepricedata = settings.json.futuresPriceStr;
            FutureSymbolExpdate = settings.json.symbol_1+'-'+settings.json.monthlyExpDate;
			ClosingPrice = settings.json.futuresClosingPrice;
            FuturesCloseChg = settings.json.futures_close_chg;
            FuturesCloseChgPercent = settings.json.futures_close_chg_percent;
            TimeStamp = settings.json.TimeStamp;
            //17May***
            defaultDatedMY = settings.json.defaultDatedMY;
				defaultstrikeprice=	strikePriceATMvalue;	 
				
				
				// console.log(settings.json.total_call_oi,'total_call_oi 1')
				if ( settings.json.total_call_oi_change === null )settings.json.total_call_oi_change=0;
				if ( settings.json.total_put_oi_change === null )settings.json.total_put_oi_change=0;
				if ( settings.json.total_call_oi === null )settings.json.total_call_oi=0;
				if ( settings.json.total_put_oi === null )settings.json.total_put_oi=0;
				if ( settings.json.total_call_volume === null )settings.json.total_call_volume=0;
				if ( settings.json.total_put_volume === null )settings.json.total_put_volume=0;
				if ( settings.json.diffoichange === null )settings.json.diffoichange=0;
				
				var total_call_oi_chg=formatIndNumbers(settings.json.total_call_oi_change);
				var total_put_oi_chg=formatIndNumbers(settings.json.total_put_oi_change);
				var total_call_oi=formatIndNumbers(settings.json.total_call_oi);
				var total_put_oi=formatIndNumbers(settings.json.total_put_oi);
				var total_call_volume=formatIndNumbers(settings.json.total_call_volume);
				var total_put_volume=formatIndNumbers(settings.json.total_put_volume);
				var diffoichange=formatIndNumbers(settings.json.diffoichange);
				//02May***
				var lot_size=settings.json.lot_size;
				// defaultDatedMY=settings.json.defaultDatedMY;
				
				// total_call_oi_chg=isNaN(total_call_oi_chg)?0:total_call_oi_chg;
				// total_put_oi_chg=isNaN(total_put_oi_chg)?0:total_put_oi_chg;
				// total_call_oi=isNaN(total_call_oi)?0:total_call_oi;
				// total_put_oi=isNaN(total_put_oi)?0:total_put_oi;
				// total_call_volume=isNaN(total_call_volume)?0:total_call_volume;
				// total_put_volume=isNaN(total_put_volume)?0:total_put_volume;
				// diffoichange=isNaN(diffoichange)?0:diffoichange;
				
				// console.log(total_call_oi,'total_call_oi')
				
			$('#total_call_oi_chg').html(total_call_oi_chg);
			$('#total_put_oi_chg').html(total_put_oi_chg);
			$('#total_call_oi').html(total_call_oi);
			$('#total_put_oi').html(total_put_oi);
		$('#total_call_volume').html(total_call_volume);
			$('#total_put_volume').html(total_put_volume);
			$('#diffoichange').html(diffoichange);
			$('#LotSize').html("<b>"+" Lot Size : "+lot_size+"</b>");
		
        }

    },

        "columnDefs": [
		
		{
        "targets": 0,
         // "className": "dt-body-center khaki",
         "className": "dt-body-center",
		 // type: 'non-empty-string',
		 // type: namesType,
		  "type": "buildup-priority",
		 
		 // "orderable": false,
		 	"createdCell": function(td, cellData, rowData, row, col) {
 
// console.log((parseInt(rowData[13])),'dhghjd')
// console.log(defaultstrikeprice,'defaultstrikeprice')

   // if ((parseFloat(rowData[17]) == defaultstrikeprice)) {
   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		$(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
		
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
		if(cellData== "LB")
		{
			$(td).css('background', ' #17CE06')
			$(td).css('font-weight','bold');

		}
		else if(cellData== "SC")
		{
			$(td).css('background', ' #90ee90')
			$(td).css('font-weight','bold');
		}
		else if(cellData== "SB")
		{
			$(td).css('background', ' #FE3939')
			$(td).css('font-weight','bold');
		}
		else if(cellData== "LU")
		{
			$(td).css('background', ' #FE8484')
			$(td).css('font-weight','bold');
		}   

},

		 
      },
	{
        "targets": 1,
         // "className": "dt-body-center khaki",
         "className": "dt-body-center",
		 // type: 'non-empty-string',
		 type: namesType,
		 
		 
		 // "orderable": false,
		 	"createdCell": function(td, cellData, rowData, row, col) {
 
// console.log((parseInt(rowData[13])),'dhghjd')
// console.log(defaultstrikeprice,'defaultstrikeprice')

   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		$(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
		
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
if(cellData== 'Bullish')
{
	$(td).css('color','green');
	$(td).css('font-weight','bold');
}
 if(cellData== 'Bearish')
{
	$(td).css('color','red');
	$(td).css('font-weight','bold');
}    

},

		 
      },
	{
        "targets": 2,
         "className": "dt-body-center",
		  // type: 'dateNonStandard',
		   type: namesType,
		  // "sType": "nullable",
		  
		 	 	  "createdCell": function(td, cellData, rowData, row, col) {
   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }

    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
		
		$(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }

     

},
//02May***
 "render":function(data, type, full, meta){
	 // console.log(meta,'')
	 if (type == "sort" || type == 'type') return data;

		if(data!='-')
		{			
	
		var values = data.split("_");
		var dateval = values[0];
		var timeval=values[1];
		
		// if(txtDateval>dateval)
		var TodayDate=new Date(txtDateval);
		var newdateval=new Date(dateval);
		
		
		var defaultDatedMY=meta.settings.json.defaultDatedMY;
		// console.log(test,dateval,'hhhhhhhh')
		// console.log(defaultDatedMY,dateval,'hhhhhhhh')
	if(defaultDatedMY==dateval)
	{
		var colorval='';
	}
	else
	{
		var colorval='#FFBFC0';
	}
var finaldate=dateval+' '+timeval;	
if (type == 'export')  return finaldate;	

return "<span title='"+finaldate+"' style='font-weight:bold;background-color:"+colorval+"'>"+timeval+"</span>";
				  
	   }
			
	}
			
		 // "orderable": false,
      },
	  {
        "targets": 3,
         // "className": "dt-body-center highlight",
         // "className": "dt-body-center greekshighlight",
         "className": "dt-body-center ",
		 
         // "className": "dt-body-right ",
		 // "orderable": false,
		 "createdCell": function (td, cellData, rowData, row, col) {
			 // console.log(rowData[13],'rowData')
			 if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
			   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
					$(td).addClass('khaki');
				}
	    for (i = 0; i < beforestrikecount; i++) {
			$(td).addClass('bordercss');
			$(td).css('border-top','1px solid #f1f1f1');
		}
		  }
      },
	  {
        "targets": 4,
         // "className": "dt-body-center highlight",
         // "className": "dt-body-center greekshighlight",
         "className": "dt-body-center ",
         // "className": "dt-body-right ",
		 // "orderable": false,
		 "createdCell": function (td, cellData, rowData, row, col) {
			 // console.log(rowData[13],'rowData')
			 
			 if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
			 for (i = 0; i < beforestrikecount; i++) {
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
			 }
			if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
               $(td).addClass('khaki');
					}
		  }
      },
	  {
        "targets": 5,
         // "className": "dt-body-center highlight",
         // "className": "dt-body-center greekshighlight",
         "className": "dt-body-center ",
         // "className": "dt-body-right ",
		 // "orderable": false,
		 "createdCell": function (td, cellData, rowData, row, col) {
			 
			 if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
			 // console.log(rowData[13],'rowData')
			 for (i = 0; i < beforestrikecount; i++) {
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
			 }
			   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
		  }
		  // render: $.fn.dataTable.render.percentBar('round','#fff', '#FF9CAB', '#FF0033', '#FF9CAB', 0, 'solid')
      },
	  {
        "targets": 6,
         // "className": "dt-body-center highlight",
         // "className": "dt-body-center greekshighlight",
         "className": "dt-body-center ",
         // "className": "dt-body-right ",
		 // "orderable": false,
		 
		  "createdCell": function (td, cellData, rowData, row, col) {
			  
			  if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
			 // console.log(rowData[13],'rowData')
			 for (i = 0; i < beforestrikecount; i++) {
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
			 }
			   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
	
		  }
		  // "render":function(data,type,row,meta){
			// var colIdx = table.row(StrikePriceIndex).index();
// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
// return '<span style="font-weight:bold;color:'+callivchgcolor+'" >' + data + '</span>';

        // }
      },
	  {
        "targets": 7,
         "className": "dt-body-center",
		 // "orderable": false,
		 type: numbersType,
		 "createdCell": function (td, cellData, rowData, row, col) {
			 

			 // console.log(rowData[13],'rowData')
			  for (i = 0; i < beforestrikecount; i++) {
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
			 }
			   if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
			  
			   
			   if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice))
			{
			// console.log(highlight,'highlight')
			// console.log(beforestrikecount,'beforestrikecount test')
			for(i=0;i<beforestrikecount;i++)
			{
				  $(td).addClass('itmhighlight');

			}
			}
		if(cellData.replace(/\,/g, '')>0)
{
	$(td).css('color','green');
	$(td).css('font-weight','bold');
}
 if(cellData.replace(/\,/g, '')<0)
{
	$(td).css('color','red');
	$(td).css('font-weight','bold');
}   
		 },


      },
	  {
        "targets": 8,
         "className": "dt-body-center",
		
		 "createdCell": function(td, cellData, rowData, row, col) {
 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }

    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
 $(td).css('font-weight', 'bold');
     

},
		  // "render":function(data,type,row,meta){
		  // var oichangearray=table.cells(null,7).data().toArray();
			 // var oichangeval=table.cells(null,7).data().toArray();
			 
			 // console.log(oichangeval,'oichangeval')
		 
		  // return '<div style="font-weight:bold" >' + data + '</div>';
		  
		   // }
		 // "orderable": false,
		 // render: $.fn.dataTable.render.percentBar('round','#fff', '#FF9CAB', '#FF0033', '#FF9CAB', 0, 'solid')
		  // "render": $.fn.dataTable.render.percentBar()
      },
	  {
        "targets": 9,
         "className": "dt-body-center",
	 
		 type: numbersType,
		
			 
			 "createdCell": function(td, cellData, rowData, row, col) {

if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
//18May***
		 var datefilter=rowData[calltimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 //02Nov21***
		 var oichg_data=(rowData[9] === '-' ? '-' : formatIndNumbers(rowData[9]));
  	// if(cellData.replace(/\,/g, '')>0)
  	if(cellData>0)
{
	
	if(defaultDatedMY==dateval)$(td).css('color','green');
	// else $(td).html('-');
	 //02Nov21***
	else $(td).html(oichg_data);
	$(td).css('font-weight','bold');
}
 // if(cellData.replace(/\,/g, '')<0)
 if(cellData<0)
{
	if(defaultDatedMY==dateval)$(td).css('color','red');
	// else $(td).html('-');
	//02Nov21***
	else $(td).html(oichg_data);
	$(td).css('font-weight','bold');
}


      },
	  "render": function(data, type, full, meta, settings, index) {
       // console.log( meta.settings.json,'meta.settings.json.maxoichangecall')
	 
// if (type == 'export')  return data;
if (type == 'export')  
				  {
					  if(data=="-")data='';
					  return data;
				  }
if(data === null) data='-';
data =(isNaN(data)?'-':data);
if (type == "sort" || type == 'type')
{
        return data;
}


// return type === 'export' ? data1 : data1;
// if (type == 'export')
// {
	// alert('export')
	 // var data1=data.replace( /[$,]/g, '' )
        // return data1;
// }
    // return type === 'export' ?data.replace( /[$,]/g, '' ) : data;
	   // if ( type === 'export') {return data.replace( /[$,]/g, '' )};
			 if(data==meta.settings.json.maxoichangecall){
				 
          return "<div style='background-color:#FFBFC0;'>"+formatIndNumbers(data)+"<div>";
        }
		 else if(data==meta.settings.json.minoichangecall){
	
		 return "<div style='background-color:lightgreen;'>"+formatIndNumbers(data)+"<div>";
        }
		else
		{
			var data=(data === '-' ? '-' : formatIndNumbers(data));
            return data ;
		}
        }, 
	  },

	  {
        "targets": 10,
         "className": "dt-body-center ",
		 type: numbersType,
		  "createdCell": function(td, cellData, rowData, row, col) {
 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }

    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(beforestrikecount, 'beforestrikecount test')
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
 // $(td).css('font-weight', 'bold');
     

},
		
		   "render":function(data,type,row,meta){
			// console.log(data,'nan testing')
			if (type == 'export')  return Math.round(data);
	if(data === null) data='-';
	data =(isNaN(data)?'-':data);
	
	if (type == "sort" || type == 'type')
{
        return data;
}
			// return '<span class="celltest" style="font-weight:bold;background:linear-gradient(to right, transparent , lightblue ) 100% " >' + data + '</span>';
			// return '<span  style="font-weight:bold; " >' + data + '</span>';
		 if(data==meta.settings.json.maxcalloi){
          return "<div style='font-weight:bold;background-color:#FFBFC0;color:black'>"+formatIndNumbers(data)+"<div>";
        }
		else if(data==meta.settings.json.mincalloi){
	
		 return "<div style='background-color:lightgreen;'>"+formatIndNumbers(data)+"<div>";
        }
		else
		{
			// console.log(data,'nan testing')
			// if(data==='-')?'-':format(data);
			// var canDrive = data > 16 ? 'yes' : 'no';
			
			var data=(data === '-' ? '-' : formatIndNumbers(data));
           return '<div  style="font-weight:bold; " >' + data + '</div>';
		}
	
	
	
			 }
      },
	  {
        "targets": 11,
         "className": "dt-body-center",
		 // "orderable": false,
		 type: numbersType,
		  "createdCell": function(td, cellData, rowData, row, col) {

 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
 // $(td).css('font-weight', 'bold');
     

},
	 "render":function(data,type,row,meta){
			if (type == 'export')  return Math.round(data);
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  if (type == "sort" || type == 'type')
{
        return data;
}

		//17May***
		 var datefilter=row[calltimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 if(defaultDatedMY==dateval) data=data;
		 else data='-';
		
		
		 
			// console.log(data,meta.settings.json.maxoichangeput,'testing')
		
			// return '<span class="celltest" style="font-weight:bold;background:linear-gradient(to right, transparent , lightblue ) 100% " >' + data + '</span>';
			// return '<span  style="font-weight:bold; " >' + data + '</span>';
		 if(data==meta.settings.json.maxcallvol){
			 // console.log("matched")
          return "<div style='font-weight:bold;background-color:lightblue;'>"+formatIndNumbers(data)+"<div>";
		  
        }
		
		else
		{
			var data=(data === '-' ? '-' : formatIndNumbers(data));
           return  data ;
		}
	
	
	
			 }	 
      },
	 
	
	 {
        "targets": 12,
         "className": "dt-body-center",
		  type: numbersType,
		 // "orderable": false,
		 		   "createdCell": function(td, cellData, rowData, row, col) {

 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
	//17May***
		 var datefilter=rowData[calltimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
	if(cellData>0)
{
	if(defaultDatedMY==dateval)$(td).css('color','green');
	else $(td).html('-');
	// $(td).css('font-weight','bold');
}
 if(cellData<0)
{
	if(defaultDatedMY==dateval)$(td).css('color','red');
	else $(td).html('-');
	// $(td).css('font-weight','bold');
}  
     

},
		  	
      },
	  {
        "targets": 13,
         "className": "dt-body-center",
		 // "orderable": false,
		 
		   "createdCell": function(td, cellData, rowData, row, col) {

 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
 // $(td).css('font-weight', 'bold');
     

},
 "render": function(data, type, full, meta, settings, index) {
            // console.log(meta.row,'test')
			var strikepricesvalues=meta.settings.json.aaData[meta.row][strikepricecolumnindex];
            // console.log(meta.settings.json.aaData[meta.row][13],'test 2')
			
		
	
            var callsymbol = meta.settings.json.symbol_1 + '-' + meta.settings.json.aaData[meta.row][strikepricecolumnindex] + 'C-' + meta.settings.json.optExpDate;
            var dt = meta.settings.json.dt;
            // console.log(callsymbol,dt,'callsymbol')
            return '<a style="text-decoration:none; color: #428bca;" href="/opt/OptionsChart.php?symbol=' + encodeURIComponent(callsymbol) + '&d=' + dt + '" target="_blank">' + data + '</a>';
        },

    }, 
	   {
        "targets": 14,
         "className": "dt-body-center",
		  type: numbersType,
		 // "orderable": false,
		 		   "createdCell": function(td, cellData, rowData, row, col) {

 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }

     

},

 "render":function(data,type,row,meta){
			  if (type == 'export')  return data;
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
		//17May***
		 var datefilter=row[calltimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 if(defaultDatedMY==dateval) data=data;
		 else data='-';
		 
			var data=(data === '-' ? '-' : format2decimals(data));
           return  data ;
	
 }	 		  	
      },
	  
	    {
        "targets": 15,
         "className": "dt-body-center",
		  type: numbersType,
		 // "orderable": false,
		 		   "createdCell": function(td, cellData, rowData, row, col) {

 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
 

},
	 "render":function(data,type,row,meta){
			  if (type == 'export')  return data;
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
//17May***
		 var datefilter=row[calltimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 // if(defaultDatedMY==dateval) data=data;
		 // else data='-';
		//10jan22***
		 data=data;
			var data=(data === '-' ? '-' : format2decimals(data));
           return  data ;
	
 }		  	
      },
	     {
        "targets": 16,
         "className": "dt-body-center",
		  type: numbersType,
		 // "orderable": false,
		 		   "createdCell": function(td, cellData, rowData, row, col) {

 if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) < defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(beforestrikecount, 'beforestrikecount test')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < beforestrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }


},
	 "render":function(data,type,row,meta){
			  if (type == 'export')  return data;
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
		//17May***
		 var datefilter=row[calltimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 // if(defaultDatedMY==dateval) data=data;
		 // else data='-';
		 //10jan22***
		 data=data;
			var data=(data === '-' ? '-' : format2decimals(data));
           return  data ;
	
 }		  	
      },
	{
        "targets": 17,
		// "className": "dt-body-center strikecolumnhighlight",
		"className": "dt-body-center",
			  "createdCell": function(td, cellData, rowData, row, col) {


			$(td).addClass('khaki');
		
    if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
 // $(td).css('font-weight', 'bold');
     
 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
},
        "render": function(data, type, full, meta, settings, index) {
			  
            var callsymbol = meta.settings.json.symbol_1 + '-' + meta.settings.json.aaData[meta.row][strikepricecolumnindex] + 'C-' + meta.settings.json.optExpDate;
            var putsymbol = meta.settings.json.symbol_1 + '-' + meta.settings.json.aaData[meta.row][strikepricecolumnindex] + 'P-' + meta.settings.json.optExpDate;
            var symbol = callsymbol + ':' + putsymbol;
			
			
            // meta.settings.json.symbol_1+'-'+meta.settings.json.aaData[meta.row][12]+'P-'+meta.settings.json.optExpDate;
            var dt = meta.settings.json.dt;
			var strikePriceATMvalue =  meta.settings.json.strikePriceATM;
           
		return '<a style="text-decoration:none; color: darkblue;" href="/opt/StraddleCharts.php?s=' + encodeURIComponent(symbol) + '&d=' + dt + '" target="_blank">' + data + '</a>';

        },
    }, 
	{
        "targets": 18,
		type: numbersType,
         "className": "dt-body-center",
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
		
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
	
},
	
	 "render":function(data,type,row,meta){
			  if (type == 'export')  return data;
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
		//17May***
		 var datefilter=row[puttimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 // if(defaultDatedMY==dateval) data=data;
		 // else data='-';
		 //10jan22***
		 data=data;
			var data=(data === '-' ? '-' : format2decimals(data));
           return  data ;
	
 }		 	
		 
      },
	  {
        "targets": 19,
		type: numbersType,
         "className": "dt-body-center",
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
		
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }

},
	 "render":function(data,type,row,meta){
			  if (type == 'export')  return data;
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
//17May***
		 var datefilter=row[puttimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 // if(defaultDatedMY==dateval) data=data;
		 // else data='-';
		//10jan22***
		 data=data;
			var data=(data === '-' ? '-' : format2decimals(data));
           return  data ;
	
 }	
      },
	{
        "targets": 20,
		type: numbersType,
         "className": "dt-body-center",
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
		
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }

},
	
	 "render":function(data,type,row,meta){
			  if (type == 'export')  return data;
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
		//17May***
		 var datefilter=row[puttimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 if(defaultDatedMY==dateval) data=data;
		 else data='-';
		 
			var data=(data === '-' ? '-' : format2decimals(data));
           return  data ;
	
 }		 	
		 
      },

	{
        "targets": 21,
       "className": "dt-body-center",
	   // "orderable": false,
	   	   "createdCell": function(td, cellData, rowData, row, col) {
			      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
      $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
},
        "render": function(data, type, full, meta, settings, index) {
            // console.log(meta.row,'test')
            // console.log(meta.settings.json.aaData[meta.row][12],'test 2')
            var putsymbol = meta.settings.json.symbol_1 + '-' + meta.settings.json.aaData[meta.row][strikepricecolumnindex] + 'P-' + meta.settings.json.optExpDate;
            var dt = meta.settings.json.dt;

            return '<a style="text-decoration:none; color: #428bca;" href="/opt/OptionsChart.php?symbol=' + encodeURIComponent(putsymbol) + '&d=' + dt + '" target="_blank">' + data + '</a>';
        },

    },
		{
        "targets": 22,
		type: numbersType,
         "className": "dt-body-center",
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
		
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
	//17May***
		 var datefilter=rowData[puttimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		if(cellData>0)
{
	if(defaultDatedMY==dateval)$(td).css('color','green');
	else $(td).html('-');
	// $(td).css('font-weight','bold');
}
 if(cellData<0)
{
	if(defaultDatedMY==dateval)$(td).css('color','red');
	else $(td).html('-');
	// $(td).css('font-weight','bold');
}  
},
	
		 	
		 
      },
	{
        "targets": 23,
         "className": "dt-body-center",
		  type: numbersType,
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
    }
},

 "render":function(data,type,row,meta){
			  if (type == 'export')  return Math.round(data);
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}

//17May***
		 var datefilter=row[puttimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 if(defaultDatedMY==dateval) data=data;
		 else data='-';
			// console.log(data,meta.settings.json.maxoichangeput,'testing')
		
			// return '<span class="celltest" style="font-weight:bold;background:linear-gradient(to right, transparent , lightblue ) 100% " >' + data + '</span>';
			// return '<span  style="font-weight:bold; " >' + data + '</span>';
		 if(data==meta.settings.json.maxputvol){
			 // console.log("matched")
          return "<div style='font-weight:bold;background-color:lightblue;'>"+formatIndNumbers(data)+"<div>";
        }
		
		else
		{
			var data=(data === '-' ? '-' : formatIndNumbers(data));
           return  data ;
		}
	
	
	
			 }	 
      },
	  {
        "targets": 24,
         "className": "dt-body-center",
		  type: numbersType,
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
},
		   // "render":function(data,type,row,meta){
			// return '<span style="font-weight:bold" >' + data + '</span>';
			 // }
			 
			 "render":function(data,type,row,meta){
				 if (type == 'export')    return Math.round(data);
			// console.log(data,meta.settings.json.minputoi,'data')
		if(data === null) data='-';
		data =(isNaN(data)?'-':data);
		
			  if (type == "sort" || type == 'type')
{
        return data;
}

			// return '<span class="celltest" style="font-weight:bold;background:linear-gradient(to right, transparent , lightblue ) 100% " >' + data + '</span>';
			// return '<span  style="font-weight:bold; " >' + data + '</span>';
		 if(data==meta.settings.json.maxputoi){
			 // console.log("matched")
          return "<div style='font-weight:bold;background-color:lightgreen;color:black'>"+formatIndNumbers(data)+"<div>";
        }
		else if(data==meta.settings.json.minputoi){
	
		 return "<div style='font-weight:bold;background-color:#FFBFC0;'>"+formatIndNumbers(data)+"<div>";
		 
        }
		else
		{
			var data=(data === '-' ? '-' : formatIndNumbers(data));
           return '<div  style="font-weight:bold; " >' + data + '</div>';
		}
	
	
	
			 }
      },
	  {
        "targets": 25,
         "className": "dt-body-center",
		 type: numbersType,
		 // "orderable": false,
		 
		 
		  	   "createdCell": function(td, cellData, rowData, row, col) {
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
		
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
		// if(cellData.replace(/\,/g, '')>0)
	//18May***
		 var datefilter=rowData[puttimecolumnindex];
		 var values = datefilter.split("_");
		 var dateval = values[0];
		 //02Nov21***
		 var oichg_data=(rowData[25] === '-' ? '-' : formatIndNumbers(rowData[25]));
		  
		if(cellData>0)
{
	if(defaultDatedMY==dateval)$(td).css('color','green');
	// else $(td).html('-');
	//02Nov21***
	else $(td).html(oichg_data);
	$(td).css('font-weight','bold');
}
 // if(cellData.replace(/\,/g, '')<0)
 if(cellData<0)
{
	if(defaultDatedMY==dateval)$(td).css('color','red');
	// else $(td).html('-');
	//02Nov21***
	else $(td).html(oichg_data);
	$(td).css('font-weight','bold');
}  
},
		  "render":function(data,type,row,meta){
			  
			  if (type == 'export')  
				  {
					  if(data=="-")data='';
					  return data;
				  }
			  if(data == null) data='-';
			  data =(isNaN(data)?'-':data);
			  
			  	  if (type == "sort" || type == 'type')
{
        return data;
}
			// console.log(data,meta.settings.json.maxoichangeput,'testing')
		
			// return '<span class="celltest" style="font-weight:bold;background:linear-gradient(to right, transparent , lightblue ) 100% " >' + data + '</span>';
			// return '<span  style="font-weight:bold; " >' + data + '</span>';
		 if(data==meta.settings.json.maxoichangeput){
			 // console.log("matched")
          return "<div style='font-weight:bold;background-color:lightgreen;'>"+formatIndNumbers(data)+"<div>";
        }
		else if(data==meta.settings.json.minoichangeput){
	
		 return "<div style='font-weight:bold;background-color:#FFBFC0;'>"+formatIndNumbers(data)+"<div>";
        }
		else
		{
			var data=(data === '-' ? '-' : formatIndNumbers(data));
           return '<div  style="font-weight:bold; " >' + data + '</div>';
		}
	
	
	
			 }
      },
	  {
        "targets": 26,
         "className": "dt-body-center",
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
},
"render":function(data,type,row,meta){
	 return '<div style="font-weight:bold" >' + data + '</div>';
 }

		 // "orderable": false,
      },
	  {
        "targets": 27,
         "className": "dt-body-center",
		 type: numbersType,
		 // "orderable": false,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
		 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');

        }
    }
		if(cellData.replace(/\,/g, '')>0)
{
	$(td).css('color','green');
	$(td).css('font-weight','bold');
}
 if(cellData.replace(/\,/g, '')<0)
{
	$(td).css('color','red');
	$(td).css('font-weight','bold');
}  

},
		  	
      },
	  {
        "targets": 28,
         // "className": "dt-body-center greekshighlight",
         "className": "dt-body-center ",
		    "createdCell": function(td, cellData, rowData, row, col) {
				   /* for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('atmhighlight');
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }*/
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
	 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
		
			 if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			  $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
			},
		 // "orderable": false,
      },
	  {
        "targets": 29,
         "className": "dt-body-center ",
		  "createdCell": function(td, cellData, rowData, row, col) {
				    /*for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('atmhighlight');
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }*/
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
	
		 if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			  $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
	 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
			},
		 // "orderable": false,
      },
	  {
        "targets": 30,
         "className": "dt-body-center ",
		  "createdCell": function(td, cellData, rowData, row, col) {
				  
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
	
		 if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			  $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
	
	 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
		
			},
			
		 // "orderable": false,
      },
	  {
        "targets": 31,
         "className": "dt-body-center ",
		  "createdCell": function(td, cellData, rowData, row, col) {
				   /* for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('atmhighlight');
			 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }*/
				      if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
	 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
		
		 if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			  $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
	
	
			},
			
		 // "orderable": false,
		 
      },
	  
	     {
        "targets": 32,
		 type: numbersType,
         "className": "dt-body-center",
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				  
				         if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			  $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
},
		 // "orderable": false,
      },
	  
	    {
        "targets": 33,
         "className": "dt-body-center",
		  type: numbersType,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				   
				         if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
 $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        }
		
    }
},
		 // "orderable": false,
      },

	   {
        "targets": 34,
		// "sType": "nullable",
		type: namesType,
         "className": "dt-body-center",
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				
				         if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
    $(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');
        }
    }
},
//02May***
 "render":function(data, type, full, meta){
	 if (type == "sort" || type == 'type') return data;

		if(data!='-')
		{			
	
		var values = data.split("_");
		var dateval = values[0];
		var timeval=values[1];
		
		// if(txtDateval>dateval)
	
		// console.log(defaultDateYmd,dateval,'hhhhhhhh')
	var defaultDatedMY=meta.settings.json.defaultDatedMY;
	if(defaultDatedMY==dateval)
	{
		var colorval='';
	}
	else
	{
		var colorval='#FFBFC0';
	}
var finaldate=dateval+' '+timeval;	
if (type == 'export')  return finaldate;	

return "<span title='"+finaldate+"' style='font-weight:bold;background-color:"+colorval+"'>"+timeval+"</span>";
				  
	   }
			
	}
		 // "orderable": false,
      },
	  {
        "targets": 35,
         "className": "dt-body-center",
		 // type: 'non-empty-string',
		 type: namesType,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				    
				         if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			$(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
	if(cellData== 'Bullish')
{
	$(td).css('color','green');
	$(td).css('font-weight','bold');
}
 if(cellData== 'Bearish')
{
	$(td).css('color','red');
	$(td).css('font-weight','bold');
}  
},
		 // "orderable": false,
		
      },
	   {
        "targets": 36,
         "className": "dt-body-center",
		 // type: 'non-empty-string',
		 // type: "buildup-priority",
		   "type": "buildup-priority",
		 // type: namesType,
		 	   "createdCell": function(td, cellData, rowData, row, col) {
				    
				         if ((parseFloat(rowData[strikepricecolumnindex]) == defaultstrikeprice)) {
     
            $(td).addClass('khaki');
    }
    if ((parseFloat(rowData[strikepricecolumnindex]) > defaultstrikeprice)) {
        // console.log(highlight,'highlight')
        // console.log(afterstrikecount, 'afterstrikecount test')
        for (i = 0; i < afterstrikecount; i++) {
            $(td).addClass('itmhighlight');
			$(td).addClass('bordercss');
		$(td).css('border-top','1px solid #f1f1f1');

        }
    }
	if(cellData== "LB")
		{
			// $(td).css('background', ' #17CE06')
			$(td).css('background', ' #FE3939')
			$(td).css('font-weight','bold');

		}
		else if(cellData== "SC")
		{
			// $(td).css('background', ' #90ee90')
			$(td).css('background', ' #FE8484')
			$(td).css('font-weight','bold');
		}
		else if(cellData== "SB")
		{
			// $(td).css('background', ' #FE3939')
			$(td).css('background', ' #17CE06')
			$(td).css('font-weight','bold');
		}
		else if(cellData== "LU")
		{
			// $(td).css('background', ' #FE8484')
			$(td).css('background', ' #90ee90')
			$(td).css('font-weight','bold');
		}    
},
		 // "orderable": false,
		
      },
	
	],

   
    "rowCallback": function(row, data, index, meta,dataIndex) {
    // "createdRow": function(row, data, index, meta,dataIndex) {
		// console.log(dataIndex,'dataIndex1')
		 // $('td', row).addClass('khaki');
	
	 var StrikePriceIndexvalue;
	

    },
   
   

});
table.fixedHeader.adjust();

// $($.fn.dataTable.tables()).DataTable().fixedHeader.adjust();
$(window).on( 'resize', function () {
	table.fixedHeader.adjust();
// table.ajax.reload();

} );
// $(".scroll").on("scroll", function (e) {
	 // console.log('scroll event')
            // horizontal = e.currentTarget.scrollLeft;
            // vertical = e.currentTarget.scrollTop;
			// table.fixedHeader.adjust();
            // });
// $(window).scroll(function() {
 // console.log('scroll event')
// table.fixedHeader.adjust();
// });

// $(".scroll").on("scroll", function (e) {
	 // console.log('scroll event')
            // horizontal = e.currentTarget.scrollLeft;
            // vertical = e.currentTarget.scrollTop;
			// table.fixedHeader.adjust();
            // });
setInterval(function() {
	table.fixedHeader.adjust();
	
	
	
    
	if(rdDataType=='latest')
{
	// if(SymbType=='CUR'){
	// getLatestPriceInfo_Currency();
	// }
	// else{
		table.ajax.reload();
	// getLatestPriceInfo();
	getLatestPriceInfo_eod();
	// }
	var expdate = $('#optExpDate').val();
	 var symbolselect = $('#optSymbol').val();
// if(symbolselect == 'NIFTY' || symbolselect == 'BANKNIFTY' || symbolselect == 'FINNIFTY' && SymbType=='FNO'){	
	getLatestSpotPrice_Spot(expdate);
	// }
}

// }, 30000);
}, 20000);





 var buttons = new $.fn.dataTable.Buttons(table, {
	 
	       
                buttons: [
                 
                    {  
                        text: '<u>G</u>reeks',
						key: 'g',
						// enabled: false,
						
						  className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
						  // className: '',
                        action: function ( e, dt, node, config ,indicator,state) {
							// console.log( table.row(0 ).data() ,"jddj");
							 // var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).css('background-color', 'red!important');
							
						
							// dt.column( 3 ).visible( ! dt.column( 3 ).visible() );
                            // dt.column( 4 ).visible( ! dt.column( 4 ).visible() );
                            // dt.column( 5 ).visible( ! dt.column( 5 ).visible() );
                            // dt.column( 6 ).visible( ! dt.column( 6 ).visible() );
							
							// for group colums is used
                          dt.columns( Greeks_group ).visible( ! dt.column( Greeks_group ).visible() );
                      
                  
                            this.active(!this.active());
							
							 document.getElementById("save").click();
                        }
                    },
					{  
                        text: '<u>I</u>V ',
						key: 'i',
						// key: {
                // key: 'i',
                // altKey: true
            // },
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
						 // className: '',
                        action: function ( e, dt, node, config ,meta) {
							// console.log(meta,'meta')
						
				 dt.columns( Iv_group ).visible( ! dt.column( Iv_group ).visible() );
							  // dt.column( 7 ).visible( ! dt.column( 7 ).visible() );
                            // dt.column( 8 ).visible( ! dt.column( 8 ).visible() );
                            // dt.column( 22 ).visible( ! dt.column( 22 ).visible() );
                            // dt.column( 23 ).visible( ! dt.column( 23 ).visible() );
                            this.active(!this.active());
							
							document.getElementById("save").click();
                        }
                    },
					{  
                        text: '<u>O</u>I ',
						key: 'o',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
							 dt.columns( Oi_group ).visible( ! dt.column( Oi_group ).visible() );
                           // dt.column( 9 ).visible( ! dt.column( 9 ).visible() );
                            // dt.column( 10 ).visible( ! dt.column( 10 ).visible() );
                            // dt.column( 20 ).visible( ! dt.column( 20 ).visible() );
                            // dt.column( 21 ).visible( ! dt.column( 21 ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
							
                        }
                    },
					{  
                        text: '<u>P</u>rice ',
						key: 'p',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
                           // dt.column( 12 ).visible( ! dt.column( 12 ).visible() );
                            // dt.column( 13 ).visible( ! dt.column( 13 ).visible() );
                            // dt.column( 14 ).visible( ! dt.column( 14 ).visible() );
                            // dt.column( 16 ).visible( ! dt.column( 16 ).visible() );
                            // dt.column( 17 ).visible( ! dt.column( 17 ).visible() );
                            // dt.column( 18 ).visible( ! dt.column( 18 ).visible() );
							
							 dt.columns( Price_group ).visible( ! dt.column( Price_group ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
							table.fixedHeader.adjust();
                        }
                    },
					{  
                        text: '<u>V</u>olume ',
						key: 'v',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
							dt.columns( Volume_group ).visible( ! dt.column( Volume_group ).visible() );
							 // dt.column( 11 ).visible( ! dt.column( 11 ).visible() );
                            // dt.column( 19 ).visible( ! dt.column( 19 ).visible() );
                        
                            this.active(!this.active());
							document.getElementById("save").click();
							table.fixedHeader.adjust();
                        }
                    },
					{  
                        text: 'PC<u>R</u>',
						key: 'r',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							
                            // dt.column( 28 ).visible( ! dt.column( 28 ).visible() );
                        // dt.column( 29 ).visible( ! dt.column( 29 ).visible() );
						
						dt.columns( PCR_group ).visible( ! dt.column( PCR_group ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
                        }
                    },
					{  
                        text: '<u>T</u>rend ',
						key: 't',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
							
                           // dt.column( 1 ).visible( ! dt.column( 1 ).visible() );
                        
                            // dt.column( 31 ).visible( ! dt.column( 31 ).visible() );
                        dt.columns( Trend_group ).visible( ! dt.column( Trend_group ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
                        }
                    },
					{  
                        text: 'Ti<u>m</u>e ',
						key: 'm',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
							
                           // dt.column( 2 ).visible( ! dt.column( 2 ).visible() );
             
                            // dt.column( 30 ).visible( ! dt.column( 30 ).visible() );
                           
						   
						             dt.columns( Time_group ).visible( ! dt.column( Time_group ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
                        }
                    },
				
					{  
					// Buildup
                        text: '<u>B</u>uildup ',
						key: 'b',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
							
                           // dt.column( 0 ).visible( ! dt.column( 0 ).visible() );
                 
                            // dt.column( 32 ).visible( ! dt.column( 32 ).visible() );
                           
						   
						      dt.columns( Buildup_group ).visible( ! dt.column( Buildup_group ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
                        }
                    },
					{  
					// Buildup
                        text: 'VWAP/Bid/<u>A</u>sk ',
						key: 'a',
						 className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--primary mdl-button--ripple-effect mdl-js-ripple-effect dt_toggle_buttons',
                        action: function ( e, dt, node, config ) {
							// var colIdx = table.row(StrikePriceIndex).index();
							// $( table.row( colIdx ).nodes() ).addClass( 'khaki' );
							
                           // dt.column( 0 ).visible( ! dt.column( 0 ).visible() );
                            // dt.column( 25 ).visible( ! dt.column( 25 ).visible() );
                            // dt.column( 32 ).visible( ! dt.column( 32 ).visible() );
                           dt.columns( Vwap_group ).visible( ! dt.column( Vwap_group ).visible() );
                           dt.columns( Ask_group ).visible( ! dt.column( Ask_group ).visible() );
                           dt.columns( Bid_group ).visible( ! dt.column( Bid_group ).visible() );
                            this.active(!this.active());
							document.getElementById("save").click();
                        }
                    },
                ]
     
}).container().appendTo($('#buttons2'));

//h*** this is added 
function GetFormattedDate(date) {
	    var todayTime = new Date(date);
	    var month = todayTime.getMonth() + 1;
	    var day = todayTime.getDate();
	    var year = todayTime.getFullYear();
	    return day + "_" + month + "_" + year;
	}
var downloadsymbol=$('#optSymbol').val();
var rdDataType=$("#rdDataType").val();
var downloadexpiry;
var downloaddate;
if(rdDataType=='latest')  downloadexpiry=$('#optExpDate').val();
if(rdDataType=='hist')downloadexpiry=$('#optExpDate_hist').val();
if(rdDataType=='latest')  downloaddate=$('#latestDate').val();
if(rdDataType=='hist')downloaddate=$('#txtDate').val();

downloaddate=GetFormattedDate(downloaddate);
var filenameval=downloadsymbol+"_"+downloadexpiry+"_"+"_"+downloaddate+'_OptionChain';


 var buttons1 = new $.fn.dataTable.Buttons(table, {
     buttons: [
       {
        /*extend: 'csv',
		// key: 'c',
		
        filename: 'OptionChain',
		// mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent
        className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-button--ripple-effect mdl-js-ripple-effect',
        text: 'Download CSV'*/
		 // extend:    'excelHtml5',
		 extend:    'excel',
		  exportOptions: { orthogonal: 'export' },
		 // filename: 'OptionChain',
		 filename: filenameval,
                text:      '<i class="fa fa-file-excel-o" ></i>',
		className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-button--ripple-effect mdl-js-ripple-effect dt_download_buttons',
                titleAttr: 'Download Excel'
				
		
		
    }, {
        /*extend: 'excel',
		// key: 'e',
        filename: 'OptionChain',
        className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-button--ripple-effect mdl-js-ripple-effect',
        text: 'Download EXCEL'*/
		extend:    'csv',
		 exportOptions: { orthogonal: 'export' },
		 // filename: 'OptionChain',
		 filename: filenameval,
                text:      '<i class="fa fa-file-text-o"></i>',
				className: 'mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-button--ripple-effect mdl-js-ripple-effect dt_download_buttons',
                titleAttr: 'Download CSV'
				
    },
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
	{
		className: 'hidebutton'
	},
    ]
}).container().appendTo($('#buttons'));
var run = false;
$('#save').on("click", function(){
	
	// alert('clicked');
	
run = true;
table.state.save(run);
// table.ajax.reload();

    // table.state.save();
});


function isAllValuesSelected() {
    var returnVal = true;

    var symVal = $("#optSymbol").val();
    var expDateVal = $("#optExpDate").val();
    if (symVal == 0 || expDateVal == 0) returnVal = false;

    if (returnVal == false) {
        alert("Please select all values to display the chart");
        return false;
		
		
    }

}
// TO BE CHECKED HERE
/*
$('#txtDate').change(function() {
    $('#optSymbol').val(0);

    $('#optExpDate').empty();

});*/
// $(function() {
    // var content = $('#txtDate').val();
// console.log(content,'content')
   /* $('#txtDate').keyup(function() {
        if ($('#txtDate').val() != content) {
            content = $('#txtDate').val();
            // alert('Content has been changed');
            $('#optSymbol').val(0);

            $('#optExpDate').empty();

        }
    });*/
// });

// var curday = function() {
    // var sp = '-';
    // today = new Date();
    // var dd = today.getDate();
    // var mm = today.getMonth() + 1; //As January is 0.
    // var yyyy = today.getFullYear();

    // if (dd < 10) dd = '0' + dd;
    // if (mm < 10) mm = '0' + mm;
    // return (yyyy + sp + mm + sp + dd);
// };

function getExpiryDatesforDate_Currency(symbol) {
    // defaultDate = $("#txtDate").val();
	//c*** added here
	  // $('.fs-label').html('Select Expiry Date');
	// if (defaultDate === undefined) defaultDate = $("#latestDate").val();
	var defaultDate=$("#defaultDate").val();
	// console.log(defaultDate,'defaultDate')
	 // if (symbol === undefined) symbol = 'NIFTY';
	 if (symbol === undefined) {
		 if(SymbType=='CUR'){
			 symbol = 'USDINR';
		 }
		 else{
			 symbol = 'NIFTY';
		 }
	 }
    
    // console.log('defaultDate=', defaultDate);
    // $.post('https://www.icharts.in/hcharts/stx8req/php/getExpiryDatesforDate.php', {
    // $.post('hcharts/stx8req/php/getExpiryDatesforDate.php', {
    $.post('hcharts/stx8req/php/getExpiryDatesforDate_Curr.php', {
        dd: defaultDate,
        sym: symbol
    }, function(data) {
       
        var options = '';
        for (var x = 0; x < data.length; x++) {
            var templID = data[x]['id'];
            var templName = data[x]['name'];
			//added here 
			// if(templID === optExpDateval) selectedval="selected";
			// else selectedval='';
			if(templID === optExpDateval) selectedval="";
			else selectedval='';
            // options += '<option value="' + templID + '">' + templName + '</option>';
           options +="<option value='"+templID+"' "+selectedval+">"+templName+"</option>";

            // if(defaultVal == templID) defaultValName = templName;
        }

        // console.log('options=', options);
        // var optionsExpDate = '<option value="0" > Select Expiry </option>' + options;
		var optionsExpDate = options;
		  // $('#optExpDate').empty();
        $('#optExpDate').html(optionsExpDate);
		//added here
		// getLatestPriceInfo();
		getLatestPriceInfo_eod();
		
		//30jul***
		var expdate=$('#optExpDate').val();
		getSymbolLots(expdate);
		getLatestSpotPrice_Spot(expdate);
        // $('#optExpDate').fSelect('reload');
    }, 'json');
}

function getFirstExpiryTradingDate_Currency(expDate) {
 var getexpirydate = $('#optExpDate_hist').val();
 var selsym=$("#optSymbol").val();
	  // console.log(getexpirydate,'strike1');
	  // $.post('hcharts/stx8req/php/getFirstExpiryTradingDate_Hist.php', {ed: getexpirydate}, function(data){
	  // $.post('hcharts/stx8req/php/getExpiryTradingDate.php', {ed: getexpirydate ,sym: selsym}, function(data){
	  $.post('hcharts/stx8req/php/getExpiryTradingDate_Curr.php', {ed: getexpirydate ,sym: selsym}, function(data){
		
		  ExpiryTradingDate=JSON.parse(data);
		 // console.log(ExpiryTradingDate,default_histdate,'ExpiryTradingDate')
		  $('#txtDate').empty();
		  
		  // $('#txtDate').val(ExpiryTradingDate);
		  
		  if(ExpiryTradingDate<default_histdate)
		  {
		  $('#txtDate').val(ExpiryTradingDate);
		  
		  }
		  else
		  {
			 $('#txtDate').val(default_histdate); 
		  }
	  })
	  }
function getExpiryDatesforSymbol_Currency(symbol) {
   // console.log(symbol,'symbol')
   // console.log(optExpDateval,'optExpDateval')
	 // if (symbol === undefined) symbol = 'NIFTY';
     // $('.fs-label').html('Expiry Date');
    // console.log('defaultDate=', defaultDate);
    // $.post('https://www.icharts.in/hcharts/stx8req/php/getExpiryDatesforDate.php', {
    // $.post('hcharts/stx8req/php/getExpiryDatesforSymbol.php', {
	if (symbol === undefined) {
		 if(SymbType=='CUR'){
			 symbol = 'USDINR';
		 }
		 else{
			 symbol = 'NIFTY';
		 }
	 }
		
    // $.post('hcharts/stx8req/php/getExpiryDatesforSymbol_Hist.php', {
    $.post('hcharts/stx8req/php/getExpiryDatesforSymbol_HistCurr.php', {
       ed: "2023-07-27",
        sym: symbol
    }, function(data) {
       // console.log(data,'data')
	    var dates = data[0];
	   var futexpiry = data[1];
	   var expiry = data[2];
        var options = '';

        for (var x = 0; x < dates.length; x++) {
            var templID = dates[x]['id'];
            // console.log(templID,'templID')
			//remove selected here
			if(templID === expiry) selectedval='selected';
			else if(templID === futexpiry) selectedval='selected';
			
			else selectedval='';
            // options += '<option value="' + templID + '">' + templID + '</option>';
          options +="<option value='"+templID+"' "+selectedval+">"+templID+"</option>";
            // if(defaultVal == templID) defaultValName = templName;
			
        }

        // console.log('options=', options);
        // var optionsExpDate = '<option value="0" class="hidden">Select Expiry Date</option>' + options;
       var optionsExpDate = options;
		  // $('#optExpDate').empty();
        $('#optExpDate_hist').html(optionsExpDate);

 $('#optExpDate_hist').fSelect('reload');
  // $("#optExpDate").find("option").eq(0).remove();

    }, 'json');
	
	
		  // if(SymbType=='CUR'){
	  // getHistPriceInfo_Currency();
	// }
	// else{
	getHistPriceInfo();
	var expdate=$('#optExpDate_hist').val();
		getSymbolLots(expdate);
getHistoricalSpotPrice(expdate)
	// }
	
		// console.log(getCallPutStrikesHist,'getCallPutStrikesHist')  


	
	 
	

}
 
  
</script>

<script type="text/javascript" src="jquery.smartmenus.js"></script>

<script type="text/javascript">
    	$(function() {
    		$('#main-menu').smartmenus({
    			subMenusSubOffsetX: 1,
    			subMenusSubOffsetY: -8,
				showTimeout: 10,
				hideTimeout: 10
    		});
    	});
    </script>
</body>
</html>
